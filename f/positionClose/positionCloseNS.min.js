"use strict";var adr=__imns("util.tools");"positionClose"in adr||(adr.positionClose=function(a){function b(a,b){return Math.ceil(a/b)*b}var c=__imns("util.classes"),d="grid"in a&&!isNaN(a.grid)&&!isNaN(parseInt(a.grid))?a.grid:1,e="element"in a?a.element:!1,f="target"in a?a.target:document,g=[];if("alignments"in a)if("object"==typeof a.alignments&&a.alignments instanceof Array)for(var h=0,i=a.alignments.length;i>h;h+=1)a.alignments[h]instanceof c.Alignment&&g.push(a.alignments[h]);else g.push(a.alignments instanceof c.Alignment?a.alignments:new c.Alignment);var j=new c.Boundary({top:0,left:0,bottom:e.outerHeight(),right:e.outerWidth()}),k=new c.Boundary({top:0,left:0,bottom:$(document).height(),right:$(document).width()}),l={possible:!1,top:0,left:0};if(k.width()<j.width()||k.height()<j.height())l.possible=!1;else for(var m=0,n=g.length;n>m;m+=1){var o=new c.Boundary({});if(g[m].target===document)o.top=0,o.left=0,o.bottom=$(document).height(),o.right=$(document).width();else{var p=f.offset();o.top=p.top,o.bottom=p.top+f.innerHeight(),o.left=p.left,o.right=p.left+f.innerWidth()}var q={top:o.top+o.height()*g[m].verticalValue(),left:o.left+o.width()*g[m].horizontalValue(),bottom:0,right:0};if(q.top=q.top-j.height()*g[m].registrationYValue(),q.left=q.left-j.width()*g[m].registrationXValue(),q.top=b(q.top,d),q.left=b(q.left,d),q.bottom=q.top+j.height(),q.right=q.left+j.width(),q.top>=k.top&&q.bottom<=k.bottom&&q.left>=k.left&&q.right<=k.right){l.top=q.top,l.left=q.left,l.possible=!0;break}}return l});