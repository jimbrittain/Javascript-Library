"use strict";function LimitExecution(){return void 0!==LimitExecution.prototype.singleton?LimitExecution.prototype.singleton:(LimitExecution.prototype.singleton=this,this.functionList=[],this)}function LimitExecutionFunction(a,b){return this.func=null,this.to=null,this.limit=null,this.minLimit=0,this.et=null,this.init(a,b)}LimitExecution.prototype.fire=function(a,b){var c=this.findLEF(a);c instanceof LimitExecutionFunction?(b!==c.limit&&(c.limit=b),c.setFire()):(c=new LimitExecutionFunction(a,b),null!==c&&(this.functionList.push(c),this.functionList[this.functionList.length-1].setFire()))},LimitExecution.prototype.end=function(a){var b=this.findLEF(a);return b instanceof LimitExecutionFunction?(b.end(),!0):!1},LimitExecution.prototype.findLEF=function(a){for(var b=0,c=this.functionList.length;c>b;b+=1)if(this.functionList[b].func===a)return this.functionList[b];return null},LimitExecutionFunction.prototype.init=function(a,b){return this.func=isFunction(a)?a:null,this.limit=this.setLimit(b),null!==this.func?this:null},LimitExecutionFunction.prototype.setFire=function(){var a=(new Date).getTime();if(a-this.limit>this.et)this.func(),this.et=a;else if(a+this.limit>this.et){this.et=this.et+this.limit;var b=this;this.to=setTimeout(function(){b.fire()},this.et-a)}},LimitExecutionFunction.prototype.fire=function(){var a=(new Date).getTime();this.func();var b=(new Date).getTime(),c=b-a;this.minLimit=c>this.minLimit?c:this.minLimit,this.setLimit(this.limit)},LimitExecutionFunction.prototype.setLimit=function(a){isNumber(a)&&a>0&&(this.limit=a<this.minLimit?this.minLimit:a)},LimitExecutionFunction.prototype.end=function(){if(null!==this.to){try{clearTimeout(this.to)}catch(a){}this.to=null}};