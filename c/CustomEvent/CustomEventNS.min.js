"use strict";var adr=__imns("util.classes");"CustomEvent"in adr||(adr.CustomEventMaster=function(){var a=__imns("util.classes");return void 0!==a.CustomEventMaster.prototype.singleton?a.CustomEventMaster.prototype.singleton:(a.CustomEventMaster.prototype.singleton=this,void(this.events=[]))},adr.CustomEventMaster.prototype.getName=function(a){return __imns("util.validation").isString(a)?a:a instanceof __imns("util.classes").CustomEvent?a.name:!1},adr.CustomEventMaster.prototype.findId=function(a){if(a=this.getName(a),a!==!1)for(var b=0,c=this.events.length;c>b;b+=1)if(a===this.events[b].name)return b;return-1},adr.CustomEventMaster.prototype.find=function(a){var b=-1;return a=this.getName(a),a!==!1&&(b=this.findId(a)),-1!==b?this.events[b]:null},adr.CustomEventMaster.prototype.exists=function(a){var b=__imns("util.classes"),c=!1;return a=this.getName(a),a!==!1?(c=this.find(a),c instanceof b.CustomEvent?!0:!1):!1},adr.CustomEventMaster.prototype.add=function(a){var b=__imns("util.classes");if(a instanceof b.CustomEvent){if(this.exists(a.name)){var c=this.find(a.name);for(var d in a.data)a.data.hasOwnProperty(d)&&(c.data[d]=a.data[d]);return c}return a.build(),this.events.push(a),this.events[this.events.length-1]}return!1},adr.CustomEventMaster.prototype.remove=function(a){__imns("util.classes");if(a=this.getName(a),a!==!1){var b=this.findId(a);if(-1!==b)return this.events.splice(b,1),!0}return!1},adr.CustomEvent=function(a,b){return this.name="",this.data={},this.built=!1,this.master=null,this.evt=null,this.init(a,b)},adr.CustomEvent.prototype.valid=function(){return __imns("util.validation").isString(this.name)},adr.CustomEvent.prototype.init=function(a,b){var c=__imns("util.classes"),d=__imns("util.tools"),e=__imns("util.validation");this.master=new c.CustomEventMaster;var f={name:null,data:null},g={};return void 0===b&&"object"==typeof a?g=d.handlePassedArguments(a,f):(g.name=a,g.data=b),this.name=e.isString(g.name)?g.name:null,this.addData(g.data),null!==this.name&&this.name.length>0?this.master.add(this):!1},adr.CustomEvent.prototype.addData=function(a){__imns("util.tools");if(null!==a&&void 0!==a){if("object"==typeof a){for(var b in a)a.hasOwnProperty(b)&&(this.data[b]=a[b]);return!0}for(var c=!1,d=0;!c&&1e3>d;)void 0===this.data[d]&&(this.data[d]=a,c=!0),d+=1;return c}return!1},adr.CustomEvent.prototype.fire=function(a){var b=__imns("util.validation"),c=__imns("util.debug");return this.built&&null!==this.evt?void(b.isHTMLElement(a)||a===window||a===document?a.dispatchEvent(this.evt):(new c.IMDebugger).pass('Custom Event "'+this.name+'" failed to fire, element is invalid')):((new c.IMDebugger).pass('Custom Event "'+this.name+'" failed to fire, no event/unbuilt'),!1)},adr.CustomEvent.prototype.build=function(){this.built||null!==this.evt||(this.built=!0,"CustomEvent"in window&&"function"==typeof window.CustomEvent?this.evt=new window.CustomEvent(this.name,{detail:this.parseData()}):"createEvent"in document?(this.evt=document.createEvent("HTMLEvents"),this.evt.initEvent(this.name,!0,!0)):"Event"in window&&(this.evt=new window.Event(this.name)))},adr.CustomEvent.prototype.parseData=function(){var a="{";for(var b in this.data)this.data.hasOwnProperty(b)&&(a+="'"+b+"':'',");return a=a.length>1?a.substring(0,a.length-1):a,a+="}"},__imns("util.tools").createEvent=function(a,b){return new(__imns("util.classes").CustomEvent)(a,b)},__imns("util.tools").fireElementEvent=function(a,b,c){var d=__imns("util.classes");if(!(b instanceof d.CustomEvent)){var e=new d.CustomEvent(b,c);return e instanceof d.CustomEvent?e.fire(a):!1}b.fire(a)},__imns("util.tools").getEventDetails=function(a){if("type"in a){var b=new(__imns("util.classes").CustomEventMaster);if(b.exists(a.type))return b.find(a.type).data}return{}});