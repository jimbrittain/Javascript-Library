"use strict";var adr=__imns("component.classes");"MediaController"in adr||(adr.checkHTML4ObjectTags=function(){var a=__imns("util.tools");"all"in document&&window.vbsActive&&a.vbsObjectCorrection()},adr.MediaController=function(){var a=__imns("component.classes"),b=__imns("util.tools");if(void 0!==a.MediaController.prototype.singleton)return a.MediaController.prototype.singleton;a.MediaController.prototype.singleton=this,this.taglist=[];var c=this;b.fetter(document,"DOMContentLoaded",[c,function(){c.checkAll()}],!0)},adr.MediaController.prototype.canHTML5Audio=function(){var a=__imns("component.classes"),b=__imns("util.validation");if(void 0!==a.MediaController.prototype._canHTML5Audio)return a.MediaController.prototype._canHTML5Audio;var c=document.createElement("audio");return a.MediaController.prototype._canHTML5Audio=b.isHTMLElement(c)&&"[object HTMLAudioElement]"===c?!0:!1,a.MediaController.prototype._canHTML5Audio},adr.MediaController.prototype.canHTML5Video=function(){var a=__imns("component.classes"),b=__imns("util.validation");if(void 0!==a.MediaController.prototype._canHTML5Video)return a.MediaController.prototype._canHTML5Video;var c=document.createElement("video");return a.MediaController.prototype._canHTML5Video=b.isHTMLElement(c)&&"[object HTMLVideoElement]"===c?!0:!1,a.MediaController.prototype._canHTML5Video},adr.MediaController.prototype.needsVBSCorrection=function(){var a=__imns("component.classes");return void 0!==a.MediaController.prototype._needsVBSCorrection?a.MediaController.prototype._needsVBSCorrection:void(a.MediaController.prototype._needsVBSCorrection="all"in document&&window.vbsActive?!0:!1)},adr.MediaController.prototype.checkHTML5VideoTags=function(){var a=__imns("util.dom"),b=__imns("component.classes");if(!this.canHTML5Video())for(var c=a.findElementsByTag("video"),d=0,e=c.length;e>d;d+=1)if(!this.beenChecked(c[d])){this.taglist.push(c[d]);var f=new b.MediaObject;f.processMediaObject(c[d]),f.writeHTML4Object()}},adr.MediaController.prototype.checkHTML5AudioTags=function(){var a=__imns("util.dom"),b=__imns("component.classes");if(!this.canHTML5Audio())for(var c=a.findElementsByTag("audio"),d=0,e=c.length;e>d;d+=1)if(!this.beenChecked(c[d])){this.taglist.push(c[d]);var f=new b.MediaObject;f.process(c[d]),f.writeHTML4Object()}},adr.MediaController.prototype.checkAll=function(){var a=__imns("util.tools");return this.checkHTML5AudioTags(),this.checkHTML5AudioTags(),this.needsVBSCorrection()&&a.vbsObjectCorrection(),!0},adr.MediaController.prototype.beenChecked=function(a){for(var b=!1,c=0,d=this.taglist.length;d>c;c+=1)if(a===this.taglist[c]){b=!0;break}return b},adr.MediaObject=function(){this._autoplay="true",this._class="",this._controls="true",this._height=0,this._id="",this._loop="true",this._name="true",this._poster="",this._preload="auto",this._width=0,this.sourcelist=[],this.valid=!1,this.element=""},adr.MediaObject.prototype.process=function(a){var b=__imns("util.tools");this._autoplay=null!==b.getAttribute(a,"autoplay")?b.getAttribute(a,"autoplay"):this._autoplay,this._class=null!==b.getAttribute(a,"class")?b.getAttribute(a,"class"):this._class,this._controls=null!==b.getAttribute(a,"controls")?b.getAttribute(a,"controls"):this._controls,this._height=null!==b.getAttribute(a,"height")?b.getAttribute(a,"height"):this._height,this._id=null!==b.getAttribute(a,"id")?b.getAttribute(a,"id"):this._id,this._loop=null!==b.getAttribute(a,"loop")?b.getAttribute(a,"loop"):this._loop,this._name=null!==b.getAttribute(a,"name")?b.getAttribute(a,"name"):this._name,this._poster=null!==b.getAttribute(a,"poster")?b.getAttribute(a,"poster"):this._poster,this._preload=null!==b.getAttribute(a,"preload")?b.getAttribute(a,"preload"):this._preload,this._width=null!==b.getAttribute(a,"width")?b.getAttribute(a,"width"):this._width,this.element=a,this.processSourceList(a),this.valid=this.sourcelist.length>0?!0:!1},adr.MediaObject.prototype.processSourceList=function(a){var b=__imns("util.tools"),c=__imns("component.classes"),d="";if(null!==b.getAttribute(a,"src")&&(d=new c.MediaSourceObject({src:b.getAttribute(a,"src"),type:b.getAttribute(a,"type")}),d.valid&&this.sourcelist.unshift(d)),"getElementsByTagName"in a){var e=a.getElementsByTagName("source");if(0===e.length&&"[object HTMLUnknownElement]"===a&&!a.hasChildNodes()){e=[];var f=a,g=f.nodeName,h="/"+g;do if(f=f.nextSibling,"SOURCE"===f.nodeName&&e.push(f),!f.nextSibling)break;while(f.nextSibling.nodeName!==g&&f.nextSibling.nodeName!==h)}for(var i=0,j=e.length;j>i;i+=1)d=new c.MediaSourceObject({src:b.getAttribute(a,"src"),type:b.getAttribute(a,"type"),codec:b.getAttribute(a,"codec")}),d.valid&&this.sourcelist.push(d);this.rationalSourcelist(),d=""}},adr.MediaObject.prototype.rationaliseSourceList=function(){for(var a=__imns("component.classes"),b=!1,c=0;c<this.sourcelist.length&&(b=null!==this.sourcelist[c].type?(new a.MimeLibrary).checkMimeType(this.sourcelist[c].type):!0,b||(this.sourcelist.splice(c,1),c-=1,0!==this.sourcelist.length));c+=1);return this.valid=this.sourcelist.length>0?!0:!1,this.valid},adr.MediaObject.prototype.writeHTML4Object=function(){var a=__imns("util.tools");if(this.valid)for(var b,c=[],d="",e=!1,f=0,g=this.sourcelist.length;g>f;f+=1){var h=document.createElement("object");if("[object HTMLObjectElement]"!==h&&(e=!0,h=document.createElement("iefixforinvalid")),a.setAttribute(h,"data",this.sourcelist[f].src),null!==this._class&&a.setAttribute(h,"class",this._class),this.sourcelist[f].type&&a.setAttribute(h,"type",this.sourcelist[f].type),0!==this._width&&a.setAttribute(h,"width",this._width),h.appendChild(this.createParamTag("autoplay",this._autoplay)),h.appendChild(this.createParamTag("loop",this._loop)),h.appendChild(this.createParamTag("preload",this._preload)),h.appendChild(this.createParamTag("controller",this._controls)),h.appendChild(this.createParamTag("controller",this._controls)),h.appendChild(this.createParamTag("src",a.getAttribute(h,"data"))),h.appendChild(this.createParamTag("filename",a.getAttribute(h,"data"))),h.appendChild(this.createParamTag("url",a.getAttribute(h,"data"))),0===f&&(null!==this._id&&a.setAttribute(h,"id",this._id),null!==this._name&&a.setAttribute(h,"name",this._name),c.push(h)),""!==this._poster){var i=document.createElement("img");a.setAttribute(i,"src",this._poster),null!==this._width&&a.setAttribute(i,"width",this._width),null!==this._height&&a.setAttribute(i,"height",this._height),c.push(h)}b=c.shift();for(var j=0,k=c.length;k>j;j+=1)b.appendChild(c[f]);var l=this.element.parentNode;if(e){var m=document.createElement("div");m.appendChild(b),d=m.innerHTML,d=d.replace(/iefixforinvalid/g,"OBJECT"),b=document.createElement("div"),b.innerHTML=d}if(l.insertBefore(b,this.element),"[object HTMLUnknownElement]"!==this.element||this.element.hasChildNodes())l.removeChild(this.element);else{var n=this.element,o=this.element.nodeName,p="/"+o;do{var q=n;n=n.nextSibling,q.parentNode.removeChild(q)}while(void 0!==n&&n.nodeName!==o&&n.nodeName!==p);n.parentNode.removeChild(n)}}},adr.MediaObject.prototype.createParamTag=function(a,b){var c=__imns("util.tools"),d=document.createElement("param");return c.setAttribute(d,"name",a),c.setAttribute(d,"value",b),d},adr.MediaSourceObject=function(){this.src="",this.type="",this.codec="",this.valid=!1,this.exists=!0,arguments&&arguments.length>0&&(1===arguments.length&&"object"==typeof arguments[0]?(this.src="src"in arguments[0]&&null!==arguments[0].src?arguments[0].src:this.src,this.type="type"in arguments[0]&&null!==arguments[0].type?arguments[0].type:this.type,this.codec="codec"in arguments[0]&&null!==arguments[0].codec?arguments[0].codec:this.codec):(void 0!==arguments[0]&&null!==arguments[0]&&(this.src=arguments[0]),void 0!==arguments[1]&&null!==arguments[1]&&(this.type=arguments[1]),void 0!==arguments[2]&&null!==arguments[2]&&(this.codec=arguments[2]))),this.valid=null!==this.src?!0:!1});