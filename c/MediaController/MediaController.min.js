"use strict";function checkHTML4ObjectTags(){"all"in document&&window.vbsActive&&im_vbsObjectCorrection()}function MediaController(){if(void 0!==MediaController.prototype.singleton)return MediaController.prototype.singleton;MediaController.prototype.singleton=this,this.taglist=[];var a=this;fetter(document,"DOMContentLoaded",a.checkAll())}function MediaObject(){this._autoplay="true",this._class="",this._controls="true",this._height=0,this._id="",this._loop="true",this._name="true",this._poster="",this._preload="auto",this._width=0,this.sourcelist=[],this.valid=!1,this.element=""}function MediaSourceObject(){this.src="",this.type="",this.codec="",this.valid=!1,this.exists=!0,arguments&&arguments.length>0&&(1===arguments.length&&"object"==typeof arguments[0]?(this.src="src"in arguments[0]&&null!==arguments[0].src?arguments[0].src:this.src,this.type="type"in arguments[0]&&null!==arguments[0].type?arguments[0].type:this.type,this.codec="codec"in arguments[0]&&null!==arguments[0].codec?arguments[0].codec:this.codec):(void 0!==arguments[0]&&null!==arguments[0]&&(this.src=arguments[0]),void 0!==arguments[1]&&null!==arguments[1]&&(this.type=arguments[1]),void 0!==arguments[2]&&null!==arguments[2]&&(this.codec=arguments[2]))),this.valid=null!==this.src?!0:!1}MediaController.prototype.canHTML5Audio=function(){if(void 0!==MediaController.prototype._canHTML5Audio)return MediaController.prototype._canHTML5Audio;var a=document.createElement("audio");return MediaController.prototype._canHTML5Audio=isHTMLElement(a)&&"[object HTMLAudioElement]"===a?!0:!1,MediaController.prototype._canHTML5Audio},MediaController.prototype.canHTML5Video=function(){if(void 0!==MediaController.prototype._canHTML5Video)return MediaController.prototype._canHTML5Video;var a=document.createElement("video");return MediaController.prototype._canHTML5Video=isHTMLElement(a)&&"[object HTMLVideoElement]"===a?!0:!1,MediaController.prototype._canHTML5Video},MediaController.prototype.needsVBSCorrection=function(){return void 0!==MediaController.prototype._needsVBSCorrection?MediaController.prototype._needsVBSCorrection:void(MediaController.prototype._needsVBSCorrection="all"in document&&window.vbsActive?!0:!1)},MediaController.prototype.checkHTML5VideoTags=function(){if(!this.canHTML5Video())for(var a=findElementsByTag("video"),b=0,c=a.length;c>b;b+=1)if(!this.beenChecked(a[b])){this.taglist.push(a[b]);var d=new MediaObject;d.processMediaObject(a[b]),d.writeHTML4Object()}},MediaController.prototype.checkHTML5AudioTags=function(){if(!this.canHTML5Audio())for(var a=findElementsByTag("audio"),b=0,c=a.length;c>b;b+=1)if(!this.beenChecked(a[b])){this.taglist.push(a[b]);var d=new MediaObject;d.process(a[b]),d.writeHTML4Object()}},MediaController.prototype.checkAll=function(){return this.checkHTML5AudioTags(),this.checkHTML5AudioTags(),this.needsVBSCorrection()&&im_vbsObjectCorrection(),!0},MediaController.prototype.beenChecked=function(a){for(var b=!1,c=0,d=this.taglist.length;d>c;c+=1)if(a===this.taglist[c]){b=!0;break}return b},MediaObject.prototype.process=function(a){this._autoplay=null!==getAttributer(a,"autoplay")?getAttributer(a,"autoplay"):this._autoplay,this._class=null!==getAttributer(a,"class")?getAttributer(a,"class"):this._class,this._controls=null!==getAttributer(a,"controls")?getAttributer(a,"controls"):this._controls,this._height=null!==getAttributer(a,"height")?getAttributer(a,"height"):this._height,this._id=null!==getAttributer(a,"id")?getAttributer(a,"id"):this._id,this._loop=null!==getAttributer(a,"loop")?getAttributer(a,"loop"):this._loop,this._name=null!==getAttributer(a,"name")?getAttributer(a,"name"):this._name,this._poster=null!==getAttributer(a,"poster")?getAttributer(a,"poster"):this._poster,this._preload=null!==getAttributer(a,"preload")?getAttributer(a,"preload"):this._preload,this._width=null!==getAttributer(a,"width")?getAttributer(a,"width"):this._width,this.element=a,this.processSourceList(a),this.valid=this.sourcelist.length>0?!0:!1},MediaObject.prototype.processSourceList=function(a){var b="";if(null!==getAttributer(a,"src")&&(b=new MediaSourceObject({src:getAttributer(a,"src"),type:getAttributer(a,"type")}),b.valid&&this.sourcelist.unshift(b)),"getElementsByTagName"in a){var c=a.getElementsByTagName("source");if(0===c.length&&"[object HTMLUnknownElement]"===a&&!a.hasChildNodes()){c=[];var d=a,e=d.nodeName,f="/"+e;do if(d=d.nextSibling,"SOURCE"===d.nodeName&&c.push(d),!d.nextSibling)break;while(d.nextSibling.nodeName!==e&&d.nextSibling.nodeName!==f)}for(var g=0,h=c.length;h>g;g+=1)b=new MediaSourceObject({src:getAttributer(a,"src"),type:getAttributer(a,"type"),codec:getAttributer(a,"codec")}),b.valid&&this.sourcelist.push(b);this.rationalSourcelist(),b=""}},MediaObject.prototype.rationaliseSourceList=function(){for(var a=!1,b=0;b<this.sourcelist.length&&(a=null!==this.sourcelist[b].type?(new MimeLibrary).checkMimeType(this.sourcelist[b].type):!0,a||(this.sourcelist.splice(b,1),b-=1,0!==this.sourcelist.length));b+=1);return this.valid=this.sourcelist.length>0?!0:!1,this.valid},MediaObject.prototype.writeHTML4Object=function(){if(this.valid)for(var a,b=[],c="",d=!1,e=0,f=this.sourcelist.length;f>e;e+=1){var g=document.createElement("object");if("[object HTMLObjectElement]"!==g&&(d=!0,g=document.createElement("iefixforinvalid")),setAttributer(g,"data",this.sourcelist[e].src),null!==this._class&&setAttributer(g,"class",this._class),this.sourcelist[e].type&&setAttributer(g,"type",this.sourcelist[e].type),0!==this._width&&setAttributer(g,"width",this._width),g.appendChild(this.createParamTag("autoplay",this._autoplay)),g.appendChild(this.createParamTag("loop",this._loop)),g.appendChild(this.createParamTag("preload",this._preload)),g.appendChild(this.createParamTag("controller",this._controls)),g.appendChild(this.createParamTag("controller",this._controls)),g.appendChild(this.createParamTag("src",getAttributer(g,"data"))),g.appendChild(this.createParamTag("filename",getAttributer(g,"data"))),g.appendChild(this.createParamTag("url",getAttributer(g,"data"))),0===e&&(null!==this._id&&setAttributer(g,"id",this._id),null!==this._name&&setAttributer(g,"name",this._name),b.push(g)),""!==this._poster){var h=document.createElement("img");setAttributer(h,"src",this._poster),null!==this._width&&setAttributer(h,"width",this._width),null!==this._height&&setAttributer(h,"height",this._height),b.push(g)}a=b.shift();for(var i=0,j=b.length;j>i;i+=1)a.appendChild(b[e]);var k=this.element.parentNode;if(d){var l=document.createElement("div");l.appendChild(a),c=l.innerHTML,c=c.replace(/iefixforinvalid/g,"OBJECT"),a=document.createElement("div"),a.innerHTML=c}if(k.insertBefore(a,this.element),"[object HTMLUnknownElement]"!==this.element||this.element.hasChildNodes())k.removeChild(this.element);else{var m=this.element,n=this.element.nodeName,o="/"+n;do{var p=m;m=m.nextSibling,p.parentNode.removeChild(p)}while(void 0!==m&&m.nodeName!==n&&m.nodeName!==o);m.parentNode.removeChild(m)}}},MediaObject.prototype.createParamTag=function(a,b){var c=document.createElement("param");return setAttributer(c,"name",a),setAttributer(c,"value",b),c};