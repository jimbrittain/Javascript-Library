"use strict";var adr=__imns("component.classes");"CarouselTransition"in adr||(adr.CarouselTransition=function(a){this.weighting="front",this._transition=null,this._complete=null,this.transitiontime=0,this.to=null,this.passer=null,this.init(a)},adr.CarouselTransition.prototype.init=function(a){"object"==typeof a&&("transition"in a&&this.setTransition(a.transition),"complete"in a&&this.setTransitionComplete(a.complete),"time"in a&&this.setTransitionTime(a.time),"weighting"in a&&this.setWeighting(a.weighting))},adr.CarouselTransition.prototype.setTransitionTime=function(a){this.transitiontime=parseFloat(__imns("util.tools").returnTime(a,"ms"))},adr.CarouselTransition.prototype.setTransitionComplete=function(a){return!(null!==a&&!__imns("util.validation").isFunction(a))&&(this._complete=a,!0)},adr.CarouselTransition.prototype.setTransition=function(a){return!(null!==a&&!__imns("util.validation").isFunction(a))&&(this._transition=a,!0)},adr.CarouselTransition.prototype.setWeighting=function(a){var b=__imns("util.validation");if(b.isString(a)){switch(a=a.toLowercase()){case"back":return this.weighting="back",!0;case"center":case"mid":case"middle":return this.weighting="center",!0;default:this.weighting="front"}return!0}return!1},adr.CarouselTransition.prototype.clearTransitionTimeout=function(){null!==this.to&&(clearTimeout(this.to),this.to=null)},adr.CarouselTransition.prototype.complete=function(a){if(a=void 0===a&&null!==this.passer?this.passer:a,!(a instanceof __imns("component.classes").CarouselPasser))return this.invalidCarouselPasser(),[];__imns("util.validation");this.passer=a,this.clearTransitionTimeout(),a.carousel.transitionComplete(),null!==this._complete&&this._complete(this),null!==this.passer&&(this.passer=null)},adr.CarouselTransition.prototype.transition=function(a){if(this.passer=a,null!==this._transition){if(this._transition(this),0!==this.transitiontime){this.clearTransitionTimeout();var b=this;this.to=setTimeout(function(){b.complete(a)},this.transitiontime)}else this.complete();return!0}return(new(__imns("util.debug").IMDebugger)).pass("components.classes.CarouselTransition.transition does not have a transition set up, use ...setTransition(function)"),!1},adr.CarouselTransition.prototype.getVisibleLayoutAtSelectedItemId=function(a,b){if(b=void 0===b&&null!==this.passer?this.passer:b,b instanceof __imns("component.classes").CarouselPasser){var c=__imns("util.tools"),d=this.getLayoutAtSelectedItemId(a),e=(b.numberVisible,b.numberVisible-1),f=b.numberVisible-1,g=c.findIdInArray(b.items[a],d);switch(this.weighting){case"back":e=0;break;case"center":e=Math.ceil(e/2),f=Math.floor(f/2);break;default:f=0}if(g-f<0){var h=g-f;e-=h,f+=h}if(g+e+1>=d.length){var i=g+e+1-d.length;f+=i,e-=i}var j=d.slice(0,g+e+1);return j=j.slice(g-f)}return(new(__imns("util.debug").IMDebugger)).pass("components.classes.CarouselTransition.transition does not have a transition set up, use ...setTransition(function)"),!1},adr.CarouselTransition.prototype.getVisibleItemElementsAtSelectedItemId=adr.CarouselTransition.prototype.getVisibleLayoutAtSelectedItemId,adr.CarouselTransition.prototype.getVisibleItemIdsAtSelectedId=function(a,b){if(b=void 0===b&&null!==this.passer?this.passer:b,b instanceof __imns("component.classes").CarouselPasser){for(var c=__imns("util.tools"),d=[],e=this.getVisibleItemElementsAtSelectedItemId(a,b),f=0,g=e.length;f<g;f+=1)d.push(c.findIdInArray(e[f],b.items));return d}return(new(__imns("util.debug").IMDebugger)).pass("components.classes.CarouselTransition.transition does not have a transition set up, use ...setTransition(function)"),!1},adr.CarouselTransition.prototype.getInvisibleItemElementsAtSelectedItemId=function(a,b){if(b=void 0===b&&null!==this.passer?this.passer:b,b instanceof __imns("component.classes").CarouselPasser){var c=__imns("util.tools"),d=c.clone(b.items),e=this.getVisibleItemIdsAtSelectedId(a,b),f=[];if(e.length>0&&e.length<d.length)for(var g=0,h=b.items.length;g<h;g+=1)c.findIdInArray(b.items[g],e)===!1&&f.push(b.items[g]);return f}return(new(__imns("util.debug").IMDebugger)).pass("components.classes.CarouselTransition.transition does not have a transition set up, use ...setTransition(function)"),!1},adr.CarouselTransition.prototype.treatAsDestinationIndex=function(a,b){if(b=void 0===b&&null!==this.passer?this.passer:b,b instanceof __imns("component.classes").CarouselPasser){var c=__imns("util.tools");if(!b.carousel.canLoop()){var d=this.getVisibleItemElementsAtSelectedItemId(a,b),e=b.items[a];switch(this.weighting){case"back":e=d[d.length-1];break;case"center":e=d[Math.floor(d.length/2)];break;default:e=d[0]}return c.findIdInArray(e,b.items)}return a}return(new(__imns("util.debug").IMDebugger)).pass("components.classes.CarouselTransition.transition does not have a transition set up, use ...setTransition(function)"),!1},adr.CarouselTransition.prototype.getInvisibleItemIdsAtSelectedItemId=function(a,b){if(b=void 0===b&&null!==this.passer?this.passer:b,b instanceof __imns("component.classes").CarouselPasser){for(var c=(__imns("util.tools"),this.getInvisibleItemElementsAtSelectedItemId(a,b)),d=[],e=0,f=c.length;e<f;e+=1)d.push(b.items[e]);return d}return(new(__imns("util.debug").IMDebugger)).pass("components.classes.CarouselTransition.transition does not have a transition set up, use ...setTransition(function)"),!1},adr.CarouselTransition.prototype.getLayoutAtSelectedItemId=function(a,b){if(b=void 0===b&&null!==this.passer?this.passer:b,b instanceof __imns("component.classes").CarouselPasser){var c=__imns("util.tools"),d=(__imns("util.validation"),c.clone(b.items));return b.carousel.canLoop()&&(d=c.clone(b.items),d=c.arrayShuffleRangeCenter(d,a)),d}return(new(__imns("util.debug").IMDebugger)).pass("components.classes.CarouselTransition.transition does not have a transition set up, use ...setTransition(function)"),!1},adr.CarouselTransition.prototype.getLayoutAtSelectedItemElement=function(a,b){if(b=void 0===b&&null!==this.passer?this.passer:b,b instanceof __imns("component.classes").CarouselPasser){var c=__imns("util.tools").findIdInArray(a,b.items);return this.getLayoutAtSelectedItemId(c,b)}return(new(__imns("util.debug").IMDebugger)).pass("components.classes.CarouselTransition.transition does not have a transition set up, use ...setTransition(function)"),!1});