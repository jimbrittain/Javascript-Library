"use strict";function SupportedCSSProperty(a,b){if(this.tested=!1,this.exists=!1,this.searchedProperty="",this.jsProperty="",this.cssProperty="",this._cssProperty="",this._jsProperty="",this.jsRE=/^[A-Za-z0-9]+$/g,this.cssRE=/^[a-z0-9\-]+$/g,this.vendorlist=new VendorList,this.prefixedRE=/^(-webkit-|Webkit|ms|-ms-|-moz-|Moz|O|-o-|-khtml-|Khtml)/g,(!("im_supportedcache"in window)||window.im_supportedcache instanceof SupportedCSSProperties)&&(window.im_supportedcache=new SupportedCSSProperties),this.supportedCache=new SupportedCSSProperties,"im_vendorlist"in window&&window.im_vendorlist instanceof VendorList||(window.im_vendorlist=new VendorList,window.im_vendorlist.add("ie","ms","-ms-"),window.im_vendorlist.add("webkit","Webkit","-webkit-"),window.im_vendorlist.add("mozilla","Moz","-moz-"),window.im_vendorlist.add("opera","O","-o-"),window.im_vendorlist.add("konqueror","Khtml","-khtml-")),this.vendorlist=new VendorList,"string"!=typeof a)throw new Error("SupportedCSSProperty must be constructed with a named property.");if(this.searchedProperty=a,a=this.isPropertyPrefixed?this.removePropertyPrefix(a):a,this._cssProperty=this.isCSSProperty(a)?a:this.returnCSSProperty(a),this._jsProperty=this.isJSProperty(a)?a:this.returnJSProperty(a),this.supportedCache.cached(this)){var c=this.supportedCache.cached(this);return c}void 0!==b?this.test(b):this.test()}function SupportedCSSProperties(){return SupportedCSSProperties.prototype.singletonInstance?SupportedCSSProperties.prototype.singletonInstance:(SupportedCSSProperties.prototype.singletonInstance=this,void(this.cache=[]))}function VendorDefinition(a,b,c){this.name=a,this.js_extension=b,this.css_extension=c}function VendorList(){return VendorList.prototype.singletonInstance?VendorList.prototype.singletonInstance:(VendorList.prototype.singletonInstance=this,void(this.list=[]))}SupportedCSSProperty.prototype.removePropertyPrefix=function(a){if("string"==typeof a){for(var b=0,c=this.vendorlist.list.length;c>b;b+=1){var d=!1,e=this.vendorlist.list[b];if(0===a.indexOf(e.js_extension))a=a.slice(e.js_extension.length),d=!0;else{if(0!==a.indexOf(e.css_extension))continue;a=a.slice(e.css_extension.length),d=!0}if(d){var f=/^[A-Z]/g;a=f.test(a)?a.charAt(0).toLowerCase()+a.slice(1):a;break}}return a}return(new IMDebugger).pass("SupportedCSSPropery.removePrefixFromProperty: Must be supplied a property string"),a},SupportedCSSProperty.prototype.returnJSPropertyPrefixedArray=function(){for(var a=[this._jsProperty],b=this._jsProperty.charAt(0).toUpperCase()+this._jsProperty.slice(1),c=0,d=this.vendorlist.list.length;d>c;c+=1)a.push(this.vendorlist.list[c].js_extension+b);return a},SupportedCSSProperty.prototype.isPropertyPrefixed=function(a){return"string"==typeof a?this.prefixedRE.test(a)?!0:!1:((new IMDebugger).pass("SupportedCSSProperty.isPropertyPrefixed: Must be supplied a property string"),!1)},SupportedCSSProperty.prototype.isCSSProperty=function(a){return"string"==typeof a?this.cssRE.test(a)?!0:!1:((new IMDebugger).pass("SupportedCSSProperties.isCSSProperty: Should be supplied a string"),!1)},SupportedCSSProperty.prototype.isJSProperty=function(a){return"string"==typeof a?this.jsRE.test(a)?!0:!1:((new IMDebugger).pass("SupportedCSSProperties.isJSProperty: Should be supplied a string"),!1)},SupportedCSSProperty.prototype.returnCSSProperty=function(a){if("string"==typeof a){if(a.match(/[A-Z]/)){for(var b="",c=0,d=a.length;d>c;c+=1){var e=a.charAt(c);e.match(/[A-Z]/)&&(e=e.toLowerCase(),e=c>0?"-"+e:e),b+=e}a=b}return a}return(new IMDebugger).pass("SupportedCSSProperties.returnCSSPropertyName: Should be supplied a string"),a},SupportedCSSProperty.prototype.returnJSProperty=function(a){if("string"==typeof a){if(a.match(/\-/)){for(var b=a.split(/\-/),c="",d=0;d<b.length;d+=1)if(b[d].length<1){var e=b.slice(0,d),f=b.slice(d+1);b=e.concat(f),d-=1}else{var g=d>0?b[d].charAt(0).toUpperCase()+b[d].slice(1):b[d];c+=g}a=c}return a}return(new IMDebugger).pass("SupportedCSSProperties.returnJSPropertyName: Should be supplied a string"),!1},SupportedCSSProperty.prototype.test=function(a){if(null!==this._jsProperty){if(this.tested)return this.exists;void 0===a&&("all"in document&&"body"in document.all?a=document.all.body:"getElementsByTagName"in document&&document.getElementsByTagName("body").length>0&&(a=document.getElementsByTagName("body")[0]));var b=null,c=null,d=this.returnJSPropertyPrefixedArray(),e="currentStyle"in a?a.currentStyle:"getComputedStyle"in window?window.getComputedStyle(a):null;if(d.length>0)if(null!==e){for(b in d)if(d.hasOwnProperty(b)&&(c=d[b],c in e)){this.jsProperty=c,this.exists=!0;break}}else if("style"in a){if("getPropertyCSSValue"in a.style)for(b in d)if(d.hasOwnProperty(b)&&(c=d[b],null!==a.style.getPropertyCSSValue(c))){this.jsProperty=c,this.exists=!0;break}if("getPropertyValue"in a.style&&!this.exists)for(b in d)if(d.hasOwnProperty(b)&&(c=d[b],null!==a.style.getPropertyValue(c))){this.jsProperty=c,this.exists=!0;break}if(!this.exists)for(b in d)if(d.hasOwnProperty(b)&&(c=d[b],c in a.style&&null!==a.style[c])){this.jsProperty=c,this.exists=!0;break}}if(this.tested=!0,this.exists||(this.jsProperty=this._jsProperty),this.isPropertyPrefixed(this.jsProperty))for(var f=0,g=this.vendorlist.list.length;g>f;f+=1){var h=this.vendorlist.list[f];if(0===this.jsProperty.indexOf(h.js_extension)){this.cssProperty=h.css_extension+this._cssProperty;break}}else this.cssProperty=this._cssProperty;return this.supportedCache.addToCache(this),this.exists}return(new IMDebugger).pass("SupportedCSSProperty is not correctly initialised"),!1},SupportedCSSProperties.prototype.cached=function(a){a instanceof SupportedCSSProperty||"string"==typeof a&&(a=new SupportedCSSProperty(a));for(var b=0,c=this.cache.length;c>b;b+=1)if(a._jsProperty===this.cache[b]._jsProperty)return this.cache[b];return!1},SupportedCSSProperties.prototype.addToCache=function(a){if(a instanceof SupportedCSSProperty){for(var b=!1,c=0,d=this.cache.length;d>c;c+=1)if(a._jsProperty===this.cache[c]._jsProperty){b=!0;break}return b?!1:(this.cache.push(a),!0)}return(new IMDebugger).pass("SupportedCSSProperties.addToCache: Should be supplied a SupportedCSSProperty"),!1},SupportedCSSProperties.prototype.detectProperty=function(a,b){if("string"==typeof a){var c=new SupportedCSSProperty(a);return this.cached(c)?this.cached(c):(c.test(isHTMLElement(b)?b:void 0),this.addToCache(c),c)}(new IMDebugger).pass("SupportedCSSProperties.detectProperty: The property must be a valid string")},VendorList.prototype.add=function(a,b,c){for(var d=!1,e=-1,f=0,g=this.list.length;g>f;f+=1){if(this.list[f].name===a){e=f;break}if(this.list[f].js_extension===b||this.list[f].css_extension===c){d=!0;break}}return-1!==e?(this.list[f].js_extension=b,this.list[f].css_extension=c,!0):d?void 0:(this.list.push(new VendorDefinition(a,b,c)),!0)};