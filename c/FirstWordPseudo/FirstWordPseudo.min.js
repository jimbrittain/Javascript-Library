"use strict";function FirstWordPseudo(a,b){this.parse_arr=[],this.selectors=[],this.rules=[],this.sel="",this.cssSel="",this.rep="",this.cssRep="",this.needSheet=!0,this.wl=new WhenWindowLoads;var c=this;this.wl.add(function(){c.init(a,b)})}FirstWordPseudo.prototype.init=function(a,b){this.sel=a,this.cssSel="::"+this.sel,this.rep=b,this.cssRep=" ."+this.rep,this.classNeeded=!0,this.cssNeeded=!1;try{var c=$("*"+this.cssSell);c.length>0&&(this.classNeeded=!1)}catch(d){this.classNeeded=!0}for(var e=$('link[rel="stylesheet"]'),f=0,g=e.length;g>f;f+=1)this.parse_arr.push(e[f]);this.parse_arr.length>0&&this.cycle()},FirstWordPseudo.prototype.cycle=function(){var a="",b="",c=this;this.parse_arr.length>0?(a=this.parse_arr.shift(),b=$(a).attr("href"),$.ajax({url:b,dataType:"text",error:function(){c.cycle()},success:function(a,b,d){var e="";d.responseText&&(e=d.responseText),"string"==typeof e&&e.length>0&&c.parseCSS(e),c.cycle()}})):this.create()},FirstWordPseudo.prototype.create=function(){if(this.selectors.length<1)return!1;var a=null,b=document.styleSheets?document.styleSheets.length:document.sheets.length;if(1!==$("#fwp_stylesheet").length){var c=$('<style id="fwp_stylesheet" type="text/css"></style>');$("head").append(c);var d=document.styleSheets?document.styleSheets.length:document.sheets.length;b!==d&&(a=document.styleSheets?document.styleSheets[b]:document.sheets[b])}else a=$("#fwp_stylesheet")[0];for(var e=a.cssRules?a.cssRules:a.rules,f=0;f<this.selectors.length;f+=1)if(this.selectors[f]=this.selectors[f].replace(this.cssSel,this.cssRep),a.insertRule)try{a.insertRule(this.selectors[f]+" {"+this.rules[f]+"}",e.length)}catch(g){}else{if(!a.addRule)break;try{a.addRule(this.selectors[f],this.rules[f])}catch(g){}}for(var h=0,i=this.selectors.length;i>h;h+=1)this.selectors[h]=this.selectors[h].replace(this.cssRep,"");this.createSpans()},FirstWordPseudo.prototype.parseCSS=function(a){var b=[],c=0,d=new RegExp("(/\\*(.|\\n)*?\\*/)","gm");for(a=a.replace(d,"");-1!==a.indexOf("/*");)a=a.substring(0,a.indexOf("/*")-2);for(;-1!==a.indexOf(this.cssSel,c)&&c<a.length;){c=a.indexOf(this.cssSel,c);var e=a.substring(0,c);if(-1!==a.indexOf("}",c)){var f=-1!==e.indexOf("}")?e.lastIndexOf("}")+1:0,g=a.indexOf("}",c),h=a.substring(f,g);if(-1!==h.indexOf("{")){var i=h.substring(h.indexOf("{")+2,h.length-1),j=h.substring(0,h.indexOf("{")-1);j=j.replace(/^\s*/,""),j=j.replace(/\s*$/,""),this.selectors.push(j),this.rules.push(i)}}c+=this.cssSel.length}this.selectors=this.selectors.concat(b)},FirstWordPseudo.prototype.createSpans=function(){for(var a=this,b=0;b<this.selectors.length;b+=1){for(var c=this.selectors[b];-1!==c.indexOf(":");){var d=c.indexOf(":"),e=c.indexOf(" ",d);e=-1===e?c.length:e,c=c.substring(0,d)+c.substring(e)}$(c).each(function(){if($(this).children(a.cssRep).length<1&&$(this).text().length>0)for(var b=$(this).text(),c=b.split(/\s+/),d=c[0],e=$(this).contents().length,f=0,g=0;d.length>0&&e>f;){for(var h=$(this).contents()[0],i=$(h).text(),j=i.split(/\s+/),k=0,l=j.length;l>k;k+=1){if(j[k].length>=d.length){var m=$(h).html(),n=!1;(null===m||void 0===m)&&(n=!0,m=$(h).parent().html());var o=m.indexOf(d,g),p=m.substring(o+d.length);m=m.substring(0,o),m+='<span class="'+a.rep+'">',m+=d,m+="</span>",m+=p;var q=n?$(h).parent():$(h);q.empty().html(m),g=o,d=""}else{var r=d.substring(0,j[k].length);d=d.substring(j[k].length),$(h).wrap('<span class="'+a.rep+'" />"'),g+=r.length}g+=j.length+12+a.rep.length+4,d.length<=0&&(k=l)}f+=1}})}};