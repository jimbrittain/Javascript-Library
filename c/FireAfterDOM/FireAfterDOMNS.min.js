"use strict";var adr=__imns("util.classes");if(!("FireAfterDOM"in adr)){adr.FireAfterDOMMethod=function(a){this.name="",this.tested=!1,this.valid=!1,this.created=!1,this._create=null,this._recreate=null,this._remove=null,this._test=null,this.needsRebuild=!1,this.init(a)},adr.FireAfterDOMMethod.prototype.test=function(){return this.tested?this.valid:"function"==typeof this._test?(this.tested=!0,this.valid=this._test(),this.valid):!1},adr.FireAfterDOMMethod.prototype.create=function(){return this.created?this.needsRebuld||"function"==typeof this._recreate?"function"==typeof this._recreate?this._recreate():"function"==typeof this._create?this._create():!1:!0:this.tested&&this.valid&&"function"==typeof this._create?this._create():!1},adr.FireAfterDOMMethod.prototype.recreate=function(){return"function"==typeof this._recreate?this._recreate():this.needsRebuild&&"function"==typeof this._create?this._create():!1},adr.FireAfterDOMMethod.prototype.remove=function(){return this.created&&"function"==typeof this._remove?this._remove():!1},adr.FireAfterDOMMethod.prototype.init=function(a){"object"==typeof a&&(this.name="name"in a?a.name:"",this._test="test"in a&&"function"==typeof a.test?a.test:null,this._create="create"in a&&"function"==typeof a.create?a.create:null,this._recreate="recreate"in a&&"function"==typeof a.recreate?a.recreate:null,this.needsRebuild="rebuild"in a&&a.rebuild?!0:!1,this._remove="remove"in a&&"function"==typeof a.remove?a.remove:null)},adr.FireAfterDOMMethods=function(){var a=__imns("util.classes");return a.FireAfterDOMMethods.prototype.singleton?a.FireAfterDOMMethods.prototype.singleton:(a.FireAfterDOMMethods.prototype.singleton=this,void(this.list=[]))},adr.FireAfterDOMMethods.prototype.add=function(a){var b=__imns("util.classes"),c=__imns("util.debug");return a instanceof b.FireAfterDOMMethod?this.find(a.name)?!1:(this.list.push(a),!0):((new c.IMDebugger).pass("FireAfterDOMMethods.add: Must be supplied a valid method"),!1)},adr.FireAfterDOMMethods.prototype.remove=function(a){var b=__imns("util.classes"),c=__imns("util.debug"),d=9;if(a instanceof b.FireAfterDOMMethod){for(d=0;d<this.list.length;d+=1)if(this.list[d]===a)return this.list.splice(d,1),!0}else{if("string"!=typeof a)return(new c.IMDebugger).pass("FireAfterDOMMethods.remove: Must be supplied a valid method or method name"),!1;for(d=0;d<this.list.length;d+=1)if(this.list[d].name===a)return this.list.splice(d,1),!0}},adr.FireAfterDOMMethods.prototype.find=function(a){for(var b=0,c=this.list.length;c>b;b+=1)if(this.list[b].name===a)return this.list[b];return!1},adr.FireAfterDOM=function(a){var b=__imns("util.classes");return b.FireAfterDOM.prototype.singleton?b.FireAfterDOM.prototype.singleton:(b.FireAfterDOM.prototype.singleton=this,this.enabled=!1,this.hardEnable=a?!0:!1,this.methods=new b.FireAfterDOMMethods,this.started=!1,this.debugMethod=null,this.functional=!0,this.processing=!1,void(this.functionsList=[]))},adr.FireAfterDOM.prototype.determineMethod=function(){for(var a=__imns("util.debug");null===this.debugMethod&&this.methods.list.length>0;)if(this.methods.list[0].test())try{if(this.methods.list[0].create())return this.debugMethod=this.methods.list[0].name,this.functional=!0,this.debugMethod;this.methods.remove(this.methods.list[0])}catch(b){this.methods.remove(this.methods.list[0])}else this.methods.remove(this.methods.list[0]);return null!==this.debugMethod?this.debugMethod:(this.functional=!1,(new a.IMDebugger).pass("FireAfterDOM is unable to function based on these methods and these conditions;"),!1)},adr.FireAfterDOM.prototype.enable=function(){var a=__imns("util.debug");this.determineMethod()?(this.enabled=!0,this.methods.find(this.determineMethod()).create()):(new a.IMDebugger).pass("Unable to determine method in FireAfterDOM")},adr.FireAfterDOM.prototype.disable=function(){this.enabled=!1},adr.FireAfterDOM.prototype.isAble=function(){return this.methods.length>0&&(this.functionsList>0||this.hardEnable)?!0:!1},adr.FireAfterDOM.prototype.fire=function(){if(!this.processing){this.processing=!0;for(var a=0;a<this.functionsList.length;a+=1){var b=!0;if("function"==typeof this.functionsList[a])try{this.functionsList[a]()}catch(c){b=!1}else b=!1;b||(this.functionsList.splice(a,1),a-=1)}this.processing=!1}},adr.FireAfterDOM.prototype.priorityAdd=function(a){var b=__imns("util.debug");return"function"==typeof a?this.add(a,!0):void(new b.IMDebugger).pass("FireAfterDOM.priorityAdd: Requires a function.")},adr.FireAfterDOM.prototype.add=function(a,b){var c=__imns("util.debug");b=void 0!==b&&b?!0:!1;var d=!1;return"function"==typeof a?(-1===this.indexOf(a)?(b?this.functionsList.unshift(a):this.functionsList.push(a),d=!0):b?(this.functionsList.splice(this.indexOf(a),1),this.functionsList.unshift(a),d=!0):d=!1,d?(this.enable(),!0):!1):void(new c.IMDebugger).pass("FireAfterDOM.add: Requires a function.")},adr.FireAfterDOM.prototype.remove=function(a){var b=__imns("util.debug");return"function"==typeof a?-1!==this.indexOf(a)?(this.functionsList.splice(this.indexOf(a),1),this.isAble()||this.disable(),!0):!1:void(new b.IMDebugger).pass("FireAfterDOM.remove: Requires a function.")},adr.FireAfterDOM.prototype.indexOf=function(a){var b=__imns("util.debug");if("function"==typeof a){for(var c=-1,d=0,e=this.functionsList.length;e>d;d+=1)if(this.functionsList[d]===a){c=d;break}return c}(new b.IMDebugger).pass("FireAfterDOM.remove: Requires a function.")};var fadMethods=new adr.FireAfterDOMMethods;fadMethods.add(new adr.FireAfterDOMMethod({name:"MutationObserver",test:function(){return"MutationObserver"in window?!0:!1},create:function(){var a="getElementsByTagName"in document?document.getElementsByTagName("body")[0]:document.all?document.all.tags("body")[0]:null,b=__imns("util.classes"),c=new b.FireAfterDOM;try{return this.mutationObserver=new MutationObserver(function(a){for(var b=0,d=a.length;d>b;b+=1)if(a[b].addedNodes.length>0){c.started=!0;break}c.started&&c.fire()}),this.mutationObserver.observe(a,{childList:!0}),this.created=!0,!0}catch(d){return!1}},remove:function(){this.mutationObserver.disconnect()},recreate:function(){var a="getElementsByTagName"in document?document.getElementsByTagName("body")[0]:document.all?document.all.tags("body")[0]:null;this.mutationObserver.observe(a,{childList:!0})}})),fadMethods.add(new adr.FireAfterDOMMethod({name:"MutationEvent",test:function(){var a="getElementsByTagName"in document?document.getElementsByTagName("body")[0]:document.all?document.all.tags("body")[0]:null;return"addEventListener"in a?!0:!1},create:function(){var a="getElementsByTagName"in document?document.getElementsByTagName("body")[0]:document.all?document.all.tags("body")[0]:null,b=__imns("util.classes"),c=new b.FireAfterDOM;try{return a.addEventListener("DOMNodeInserted",function(){c.started=!0,c.fire()}),this.created=!0,!0}catch(d){return this.valid=!1,!1}},rebuild:!1})),fadMethods.add(new adr.FireAfterDOMMethod({name:"HTCBehavior",test:function(){var a="getElementsByTagName"in document?document.getElementsByTagName("body")[0]:document.all?document.all.tags("body")[0]:null;return"addBehavior"in a&&"attachEvent"in a?!0:!1},create:function(){try{var a="getElementsByTagName"in document?document.getElementsByTagName("body")[0]:document.all?document.all.tags("body")[0]:null,b=__imns("util.classes"),c=new b.FireAfterDOM;return a.addBehavior("noneexistentfile.htc"),a.attachEvent("onpropertychange",function(){c.started=!0,c.fire()}),this.created=!0,!0}catch(d){return this.valid=!1,!1}},rebuild:!1})),fadMethods.add(new adr.FireAfterDOMMethod({name:"propertyChange",test:function(){var a="getElementsByTagName"in document?document.getElementsByTagName("body")[0]:document.all?document.all.tags("body")[0]:null;return"onpropertychange"in a?!0:!1},create:function(){var a=__imns("util.classes"),b=new a.FireAfterDOM,c="getElementsByTagName"in document?document.getElementsByTagName("body")[0]:document.all?document.all.tags("body")[0]:null;try{return c.onpropertychange=function(a){"innerHTML"===a.propertyName&&(b.started=!0,b.fire())},this.created=!0,!0}catch(d){return!1}},rebuild:!1})),fadMethods.add(new adr.FireAfterDOMMethod({name:"jQuery",test:function(){return"jQuery"in window?!0:!1},create:function(){var a=__imns("util.classes"),b=new a.FireAfterDOM;try{return $(document).ajaxComplete(function(){this.ajaxTimeout=setTimeout(function(){b.started&&b.fire()},2e3)}),$(document).ajaxStart(function(){null!==this.ajaxTimeout&&(clearTimeout(this.ajaxTimeout),this.ajaxTimeout=null),b.started=!0}),this.created=!0,!0}catch(c){return this.valid=!1,!1}},rebuild:!1}))}