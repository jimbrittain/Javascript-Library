"use strict";function Overlay(a){return void 0!==Overlay.prototype.singleton?void 0!==a?Overlay.prototype.singleton.init(a):Overlay.prototype.singleton:(Overlay.prototype.singleton=this,this.initiated=!1,this.active=!0,this.element="",this._isOpen=null,this._isClosed=null,this._start=null,this._end=null,this.openprops=[],this.closeprops=[],this.animation=new Animation,void(void 0!==a&&this.init(a)))}Overlay.prototype.addStartAnimationFunction=function(a){return void 0!==a&&"function"==typeof a?(this._start=a,!0):!1},Overlay.prototype.addEndAnimationFunction=function(a){return void 0!==a&&"function"==typeof a?(this.end=a,!0):!1},Overlay.prototype.resetDefaults=function(){this._isOpen=null,this._isClosed=null,this._start=null,this._end=null,this.openprops=[],this.closeprops=[]},Overlay.prototype.init=function(a){return this.element=null!==a&&isHTMLElement(a)?a:null,this.parentElement=this.element.parentElement?this.element.parentElement:this.element.parentNode?this.element.parentNode:null,this.resetDefaults(),null!==this.element&&(this.initiated=!0,this.hasCloseButton()||this.buildCloseButton()),this},Overlay.prototype.setActive=function(a){this.active=void 0!==a&&!a||null===this.element?!1:!0},Overlay.prototype.setIsOpen=function(a){return void 0!==a&&"function"==typeof a?(this._isOpen=a,!0):!1},Overlay.prototype.isOpen=function(){return null!==this._isOpen&&"function"==typeof this._isOpen?this._isOpen():!1},Overlay.prototype.setIsClosed=function(a){return void 0!==a&&"function"==typeof a?(this._isClosed=a,!0):!1},Overlay.prototype.isClosed=function(){return null!==this._isClosed&&"function"==typeof this._isClosed?this._isClosed():null!==this._isOpen&&"function"==typeof this._isOpen?this._isOpen()?!1:!0:!1},Overlay.prototype.toggle=function(){return this.isOpen()?this.close():this.open()},Overlay.prototype.open=function(){if(this.active&&this.initiated){if(!this.isOpen()&&this.openprops.length>0){null!==this._start&&this._start(),null!==this.animation&&this.animation.animating&&this.animation.pause();var a={element:this.element,descriptor:"overlayanimation",duration:1500,timingFunction:"ease-in-out"};null!==this._end&&"function"==typeof this._end&&(a.endFunction=this._end),this.animation=new Animation(a);for(var b=0,c=this.openprops.length;c>b;b+=1)this.animation.setProperty(this.openprops[b]);this.animation.run()}return!0}return!1},Overlay.prototype.close=function(){if(this.active&&this.initiated){if(!this.isClosed()&&this.closeprops.length>0){null!==this._start&&this._start(),null!==this.animation&&this.animation.animating&&this.animation.pause();var a={element:this.element,descriptor:"overlayanimation",duration:1500,timingFunction:"ease-in-out"};this.animation=new Animation(a),null!==this._end&&"function"==typeof this._end&&(a.endFunction=this._end);for(var b=0,c=this.closeprops.length;c>b;b+=1)this.animation.setProperty(this.closeprops[b]);this.animation.run()}return!0}return!1},Overlay.prototype.hasCloseButton=function(){if(this.initiated&&null!==this.element&&isHTMLElement(this.element)){var a=findElementByID("overclose");return null!==a&&void 0!==a&&isHTMLElement(a)?!0:!1}return!1},Overlay.prototype.buildCloseButton=function(){if(this.initiated&&!this.hasCloseButton()&&null!==this.element&&isHTMLElement(this.element))if("innerHTML"in this.element)this.element.innerHTML=this.element.innerHTML+'<a id="overclose">&#215;</a>';else if("createElement"in document&&"appendChild"in this.element){var a=document.createElement("a");a.setAttribute("id","overclose"),this.element.appendChild(a)}var b=findElementByID("overclose");if(void 0!==b&&isHTMLElement(b)){var c=this;return fetter(b,"click",function(a){c.toggle(),preventEvent(a)},!1),fetter(b,"touchstart",function(a){c.toggle(),preventEvent(a)},!1),!0}return!1},Overlay.prototype.setOpenProperty=function(a,b){this.openprops.push({name:a,end:b})},Overlay.prototype.setCloseProperty=function(a,b){this.closeprops.push({name:a,end:b})};