"use strict";var adr=__imns("util.classes");"ClipBox"in adr||(adr.ClipBox=function(a){var b=__imns("util.classes"),c=__imns("util.debug");this.element=null,this.container=null,this.angle=90,this.constrainParent=!0,this._determineInnerWidth=null,this._determineInnerHeight=null,this._determineOuterWidth=null,this._determineOuterHeight=null,this.outer={width:0,height:0},this.inner={width:0,height:0},this.working=new b.CoordinatesBox;var d=this.init(a);return d?($(this.element).css("visibility","visible"),this):((new c.IMDebugger).pass("Unable to initialise ClipBox"),!1)},adr.ClipBox.prototype.init=function(a){var b=__imns("util.validation"),c=__imns("util.tools");if(b.isHTMLElement(a))this.element=this.checkElement(a);else if("object"==typeof a){if("direction"in a)switch(a.direction){case"ttb":this.angle=0;break;case"bbt":this.angle=180;break;case"rtl":this.angle=270;break;case"ltr":case"default":this.angle=90}else"angle"in a&&!isNaN(parseFloat(a.angle))&&isFinite(a.angle)&&(this.angle=c.simplifyDegrees(a.angle));this.constrainParent="constrainParent"in a&&a.constrainParent?!0:!1,this.element="element"in a&&b.isHTMLElement(a.element)?this.checkElement(a.element):null,this.container="container"in a&&b.isHTMLElement(a.container)?a.container:null,this._determineInnerWidth="determineInnerWidth"in a&&"function"==typeof a.determineInnerWidth?a.determineInnerWidth:null,this._determineInnerHeight="determineInnerHeight"in a&&"function"==typeof a.determineInnerHeight?a.determineInnerHeight:null,this._determineOuterWidth="determineOuterWidth"in a&&"function"==typeof a.determineOuterWidth?a.determineOuterWidth:null,this._determineOuterHeight="determineOuterHeight"in a&&"function"==typeof a.determineOuterHeight?a.determineOuterHeight:null}else if("string"==typeof a){var d=$(a);d.length>0&&b.isHTMLElement(d[0])&&(this.element=this.checkElement(d[0]))}return null!==this.element?(this.container=null===this.container?$(this.element).parent()[0]:this.container,this.determineInnerWidth(),this.determineInnerHeight(),this.determineOuterWidth(),this.determineOuterHeight(),!0):!1},adr.ClipBox.prototype.initialised=function(){return 0===this.outer.width||0===this.outer.height||0===this.inner.width||0===this.inner.height?!1:!0},adr.ClipBox.prototype.move=function(a){var b=__imns("util.tools");a=b.convertToPixelNumber(a);var c={left:b.convertToPixelNumber($(this.element).css("left")),top:b.convertToPixelNumber($(this.element).css("top"))},d=b.calculateAngledDistance(this.angle,a);c.left+=d.x,c.top+=d.y,this.reposition(c)},adr.ClipBox.prototype.determine=function(){if(this.initialised()){var a=__imns("util.tools"),b=__imns("util.classes");this.working=new b.CoordinatesBox;var c={top:a.convertToPixelNumber($(this.element).css("top")),right:a.convertToPixelNumber($(this.element).css("right")),bottom:a.convertToPixelNumber($(this.element).css("bottom")),left:a.convertToPixelNumber($(this.element).css("left"))},d={top:c.top,left:c.left};this.reposition(d)}},adr.ClipBox.prototype.reposition=function(a){if(this.initialised()){var b=__imns("util.tools"),c=__imns("util.classes");this.working=new c.CoordinatesBox,this.working.x2=this.outer.width,this.working.y2=this.outer.height;var d={top:0,left:0};if($.isArray(a)){var e={};if(4===a.length)e={top:b.convertToPixelNumber(a[0]),right:b.convertToPixelNumber(a[1]),bottom:b.convertToPixelNumber(a[2]),left:b.convertToPixelNumber(a[3])};else if(a.length%2===0&&a.length<9)for(var f=0;f<a.length;){var g=a[f],h=b.convertToPixelNumber(a[f+1]);e[g]=h,f+=1}a=e}return"object"==typeof a&&("right"in a&&(d.left-=b.convertToPixelNumber(a.right)),"left"in a&&(d.left+=b.convertToPixelNumber(a.left)),"bottom"in a&&(d.top-=b.convertToPixelNumber(a.bottom)),"top"in a&&(d.top+=b.convertToPixelNumber(a.top))),this.setVertical(d.top),this.setHorizontal(d.left),this.setClip(),this.setXY(),!0}var i=__imns("util.debug");return(new i.IMDebugger).pass("ClipBox is not properly initialised. Aborting"),!1},adr.ClipBox.prototype.setHorizontal=function(a){this.working.x1=a,this.inner.width<this.outer.width?(this.working.x1=0,this.working.x2=this.inner.width):(this.working.x2=this.working.x1+this.inner.width,this.working.x2<this.outer.width?(this.working.x2=this.outer.width,this.working.x1=this.working.x2-this.inner.width):this.working.x1>0&&(this.working.x1=0,this.working.x2=this.working.x1+this.inner.width)),this.working.x1<0&&(this.working.x=this.working.x1,this.working.x1=Math.abs(this.working.x1),this.working.x2+=this.working.x1)},adr.ClipBox.prototype.setVertical=function(a){this.working.y1=a,this.inner.height<this.outer.height?(this.working.y1=0,this.working.y2=this.inner.height):(this.working.y2=this.working.y1+this.inner.height,this.working.y2<this.outer.height?(this.working.y2=this.outer.height,this.working.y1=this.working.y2-this.inner.height):this.working.y1>0&&(this.working.y1=0,this.working.y2=this.working.y1+this.inner.height)),this.working.y1<0&&(this.working.y=this.working.y1,this.working.y1=Math.abs(this.working.y1),this.working.y2+=this.working.y1)},adr.ClipBox.prototype.checkElement=function(a){var b="relative"===$(a).parent().css("position")||"absolute"===$(a).parent().css("position")?!0:!1,c="absolute"===$(a).css("position")||"relative"===$(a).css("position")?!0:!1,d="hidden"===$(a).css("visibility")?!0:!1;return b&&c&&d?a:null},adr.ClipBox.prototype.parseClip=function(){var a=$(this.element).css("clip"),b={top:0,right:0,bottom:0,left:0},c=__imns("util.tools");if(0===a.indexOf("rect(")){a=a.substring(5),a=a.substring(0,a.length-1);var d=[];-1!==a.indexOf(", ")?d=a.split(", "):-1!==a.indexOf(",")?d=a.split(","):-1!==a.indexOf(" ")&&(d=a.split(" ")),4===d.length&&(b.top=c.convertToPixelNumber(d[0]),b.right=c.convertToPixelNumber(d[1]),b.bottom=c.convertToPixelNumber(d[2]),b.left=c.convertToPixelNumber(d[3]))}return b},adr.ClipBox.prototype.determineOuterWidth=function(){var a=__imns("util.tools");this.outer.width=a.convertToPixelNumber("function"==typeof this._determineOuterWidth?this._determineOuterWidth():$(this.container).innerWidth())},adr.ClipBox.prototype.determineOuterHeight=function(){var a=__imns("util.tools");this.outer.height=a.convertToPixelNumber("function"==typeof this._determineOuterHeight?this._determineOuterHeight():$(this.container).innerHeight())},adr.ClipBox.prototype.determineInnerWidth=function(){var a=__imns("util.tools");this.inner.width=a.convertToPixelNumber("function"==typeof this._determineInnerWidth?this._determineInnerWidth():$(this.element).outerWidth())},adr.ClipBox.prototype.determineInnerHeight=function(){var a=__imns("util.tools");this.inner.height=a.convertToPixelNumber("function"==typeof this._determineInnerHeight?this._determineInnerHeight():$(this.element).outerHeight())},adr.ClipBox.prototype.handleValue=function(a){return 0===a?"auto":a+"px"},adr.ClipBox.prototype.setClip=function(){$(this.element).css("clip","rect("+this.handleValue(this.working.y1)+" "+this.handleValue(this.working.x2)+" "+this.handleValue(this.working.y2)+" "+this.handleValue(this.working.x1)+")"),this.constrainParent&&($(this.element).parent().css("width",this.working.x2-this.working.x1+"px"),$(this.element).parent().css("height",this.working.y2-this.working.y1+"px"))},adr.ClipBox.prototype.setXY=function(){var a=this.working.x,b=this.working.y;$(this.element).css("left")!==this.handleValue(a)&&$(this.element).css("left",this.handleValue(a)),$(this.element).css("top")!==this.handleValue(b)&&$(this.element).css("top",this.handleValue(b))},adr.CoordinatesBox=function(){this.x1=0,this.x2=0,this.y1=0,this.y2=0,this.requiresAlteration=!1,this.x=0,this.y=0});