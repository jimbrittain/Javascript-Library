"use strict";var adr=__imns("util.classes");"ScreenSettings"in adr||(adr.ScreenSettingTask=function(a){this.created=!1,this.active=!1,this._create=null,this._activate=null,this._suspend=null,this._remove=null,void 0!==a&&this.init(a)},adr.ScreenSettingTask.prototype.init=function(a){return"object"==typeof a&&"create"in a&&"activate"in a&&"suspend"in a?(this.addCreate(a.create),this.addActivate(a.activate),this.addSuspend(a.suspend),!0):!1},adr.ScreenSettingTask.prototype.create=function(){if(this.created||null===this._create||"function"!=typeof this._create)return!1;var a=this._create();return a=a===!1?!1:!0,this.created=a,a},adr.ScreenSettingTask.prototype.addCreate=function(a){return void 0===a||"function"!=typeof a||this.created?!1:(this._create=a,!0)},adr.ScreenSettingTask.prototype.activate=function(){if(this.created&&!this.active&&null!==this._activate&&"function"==typeof this._activate){var a=this._activate();return a=a===!1?!1:!0,this.active=a,a}return!1},adr.ScreenSettingTask.prototype.addActivate=function(a){return void 0!==a&&"function"==typeof a?(this._activate=a,!0):!1},adr.ScreenSettingTask.prototype.suspend=function(){if(this.created&&this.active&&null!==this._suspend&&"function"==typeof this._suspend){var a=this._suspend();return a=a===!1?!1:!0,this.active=!a,a}return!1},adr.ScreenSettingTask.prototype.addSuspend=function(a){return void 0!==a&&"function"==typeof a?(this._suspend=a,!0):!1},adr.ScreenSettingsInstance=function(a){this.name=null,this.created=!1,this.active=!1,this.master="",this._is=null,this._not=null,this.tasks=[],void 0!==a&&this.init(a)},adr.ScreenSettingsInstance.prototype.init=function(a){this.master=new(__imns("util.classes").ScreenSettings),"string"==typeof a?this.name=a:"object"==typeof a&&("name"in a&&(this.name=a.name),"is"in a&&this.addIs(a.is),"not"in a&&this.addNot(a.not))},adr.ScreenSettingsInstance.prototype.addTask=function(a){var b=__imns("util.classes");return a instanceof b.ScreenSettingTask&&-1===this.findTaskId(a)?(this.tasks.push(a),!0):!1},adr.ScreenSettingsInstance.prototype.findTaskId=function(a){for(var b=-1,c=0,d=this.tasks.length;d>c;c+=1)if(a===this.tasks[c]){b=c;break}return b},adr.ScreenSettingsInstance.prototype.findTask=function(a){var b=this.findTaskId(a);return-1!==b?this.tasks[b]:void 0},adr.ScreenSettingsInstance.prototype.removeTask=function(a){var b=__imns("util.classes");if(a instanceof b.ScreenSettingTask){var c=this.findTaskId(a);if(-1!==c)return this.tasks.splice(c,1),!0}return!1},adr.ScreenSettingsInstance.prototype.create=function(){var a=__imns("util.classes"),b=__imns("util.debug");if(this.created)return!1;for(var c=0,d=this.tasks.length;d>c;c+=1)this.tasks[c]instanceof a.ScreenSettingTask?this.tasks[c].create():(new b.IMDebugger).pass("ScreenSettingsInstance has an improper ScreenSettingTask in its task");return this.created=!0,!0},adr.ScreenSettingsInstance.prototype.suspend=function(){var a=__imns("util.classes"),b=__imns("util.debug");if(this.created&&this.active){for(var c=0,d=this.tasks.length;d>c;c+=1)this.tasks[c]instanceof a.ScreenSettingTask?this.tasks[c].suspend():(new b.IMDebugger).pass("ScreenSettingsInstance has an improper ScreenSettingTask in its task");return this.active=!1,!0}return!1},adr.ScreenSettingsInstance.prototype.activate=function(){var a=__imns("util.classes"),b=__imns("util.debug");if(this.created&&!this.active){for(var c=0,d=this.tasks.length;d>c;c+=1)this.tasks[c]instanceof a.ScreenSettingTask?this.tasks[c].activate():(new b.IMDebugger).pass("ScreenSettingsInstance has an improper ScreenSettingTask in its task");return this.active=!0,!0}return!1},adr.ScreenSettingsInstance.prototype.is=function(){return null!==this._is&&"function"==typeof this._is?this._is():!1},adr.ScreenSettingsInstance.prototype.not=function(){return null!==this._not&&"function"==typeof this._not?this._not():!0},adr.ScreenSettingsInstance.prototype.addIs=function(a){return void 0!==a&&"function"==typeof a?(this._is=a,!0):!1},adr.ScreenSettingsInstance.prototype.addNot=function(a){return void 0!==a&&"function"==typeof a?(this._not=a,!0):!1},adr.ScreenSettings=function(){var a=__imns("util.classes");return void 0!==a.ScreenSettings.prototype.singleton?a.ScreenSettings.prototype.singleton:(a.ScreenSettings.prototype.singleton=this,this.settings=[],void this.init())},adr.ScreenSettings.prototype.init=function(){var a=__imns("util.tools"),b=this;this.addListener(),a.fetter(window,"load",[b,function(){b.runSettings()}],"both",!0)},adr.ScreenSettings.prototype.runSettings=function(){for(var a="",b=0,c=this.settings.length;c>b;b+=1)a=this.settings[b],a.is()?(a.created||a.create(),a.activate()):a.created&&a.suspend();return!0},adr.ScreenSettings.prototype.addSettings=function(a,b){var c=__imns("util.validation"),d=__imns("util.classes"),e="string"==typeof a?a:"name"in a?a.name:"",f=this.findSettings(e),g="";if(f=void 0!==f?f:this.addNewSetting("string"==typeof a?e:a),c.isArray(b))for(var h=0,i=b.length;i>h;h+=1)g=b[h],g instanceof d.ScreenSettingTask&&f.addTask(g);else b instanceof d.ScreenSettingTask&&f.addTask(b)},adr.ScreenSettings.prototype.addNewSetting=function(a){var b=__imns("util.classes");return this.settings.push(new b.ScreenSettingsInstance(a)),this.settings[this.settings.length-1]},adr.ScreenSettings.prototype.findSettingsId=function(a){for(var b=-1,c=0,d=this.settings.length;d>c;c+=1)if(this.settings[c].name===a){b=c;break}return b},adr.ScreenSettings.prototype.findSettings=function(a){var b=this.findSettingsId(a);return-1!==b?this.settings[b]:void 0},adr.ScreenSettings.prototype.addListener=function(){var a=__imns("util.tools"),b=this;a.fetter(window,"resize",[b,function(){b.runSettings()}],!0)});