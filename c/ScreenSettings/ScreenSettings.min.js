"use strict";function ScreenSettingTask(a){this.created=!1,this.active=!1,this._create=null,this._activate=null,this._suspend=null,this._remove=null,void 0!==a&&this.init(a)}function ScreenSettingsInstance(a){this.name=null,this.created=!1,this.active=!1,this._is=null,this._not=null,this.tasks=[],void 0!==a&&this.init(a)}function ScreenSettings(){return void 0!==ScreenSettings.prototype.singleton?ScreenSettings.prototype.singleton:(ScreenSettings.prototype.singleton=this,void(this.settings=[]))}ScreenSettingTask.prototype.init=function(a){return"object"==typeof a&&"create"in a&&"activate"in a&&"suspend"in a?(this.addCreate(a.create),this.addActivate(a.activate),this.addSuspend(a.suspend),!0):!1},ScreenSettingTask.prototype.create=function(){if(this.created||null===this._create||"function"!=typeof this._create)return!1;var a=this._create();return a=a===!1?!1:!0,this.created=a,a},ScreenSettingTask.prototype.addCreate=function(a){return void 0===a||"function"!=typeof a||this.created?!1:(this._create=a,!0)},ScreenSettingTask.prototype.activate=function(){if(this.created&&!this.active&&null!==this._activate&&"function"==typeof this._activate){var a=this._activate();return a=a===!1?!1:!0,this.active=a,a}return!1},ScreenSettingTask.prototype.addActivate=function(a){return void 0!==a&&"function"==typeof a?(this._activate=a,!0):!1},ScreenSettingTask.prototype.suspend=function(){if(this.created&&this.active&&null!==this._suspend&&"function"==typeof this._suspend){var a=this._suspend();return a=a===!1?!1:!0,this.active=!a,a}return!1},ScreenSettingTask.prototype.addSuspend=function(a){return void 0!==a&&"function"==typeof a?(this._suspend=a,!0):!1},ScreenSettingsInstance.prototype.init=function(a){"string"==typeof a?this.name=a:"object"==typeof a&&("name"in a&&(this.name=a.name),"is"in a&&this.addIs(a.is),"not"in a&&this.addNot(a.not))},ScreenSettingsInstance.prototype.addTask=function(a){return a instanceof ScreenSettingTask&&-1===this.findTaskId(a)?(this.tasks.push(a),!0):!1},ScreenSettingsInstance.prototype.findTaskId=function(a){for(var b=-1,c=0,d=this.tasks.length;d>c;c+=1)if(a===this.tasks[c]){b=c;break}return b},ScreenSettingsInstance.prototype.findTask=function(a){var b=this.findTaskId(a);return-1!==b?this.tasks[b]:void 0},ScreenSettingsInstance.prototype.removeTask=function(a){if(a instanceof ScreenSettingTask){var b=this.findTaskId(a);if(-1!==b)return this.tasks.splice(b,1),!0}return!1},ScreenSettingsInstance.prototype.create=function(){if(this.created)return!1;for(var a=0,b=this.tasks.length;b>a;a+=1)this.tasks[a]instanceof ScreenSettingTask?this.tasks[a].create():(new IMDebugger).pass("ScreenSettingsInstance has an improper ScreenSettingTask in its task");return this.created=!0,!0},ScreenSettingsInstance.prototype.suspend=function(){if(this.created&&this.active){for(var a=0,b=this.tasks.length;b>a;a+=1)this.tasks[a]instanceof ScreenSettingTask?this.tasks[a].suspend():(new IMDebugger).pass("ScreenSettingsInstance has an improper ScreenSettingTask in its task");return this.active=!1,!0}return!1},ScreenSettingsInstance.prototype.activate=function(){if(this.created&&!this.active){for(var a=0,b=this.tasks.length;b>a;a+=1)this.tasks[a]instanceof ScreenSettingTask?this.tasks[a].activate():(new IMDebugger).pass("ScreenSettingsInstance has an improper ScreenSettingTask in its task");return this.active=!0,!0}return!1},ScreenSettingsInstance.prototype.is=function(){return null!==this._is&&"function"==typeof this._is?this._is():!1},ScreenSettingsInstance.prototype.not=function(){return null!==this._not&&"function"==typeof this._not?this._not():!0},ScreenSettingsInstance.prototype.addIs=function(a){return void 0!==a&&"function"==typeof a?(this._is=a,!0):!1},ScreenSettingsInstance.prototype.addNot=function(a){return void 0!==a&&"function"==typeof a?(this._not=a,!0):!1},ScreenSettings.prototype.runSettings=function(){for(var a="",b=0,c=this.settings.length;c>b;b+=1)a=this.settings[b],a.is()?(a.created||a.create(),a.activate()):a.created&&a.suspend();return!0},ScreenSettings.prototype.addSettings=function(a,b){var c="string"==typeof a?a:"name"in a?a.name:"",d=this.findSettings(c),e="";if(d=void 0!==d?d:this.addNewSetting("string"==typeof a?c:a),isArray(b))for(var f=0,g=b.length;g>f;f+=1)e=b[f],e instanceof ScreenSettingTask&&d.addTask(e);else b instanceof ScreenSettingTask&&d.addTask(b)},ScreenSettings.prototype.addNewSetting=function(a){return this.settings.push(new ScreenSettingsInstance(a)),this.settings[this.settings.length-1]},ScreenSettings.prototype.findSettingsId=function(a){for(var b=-1,c=0,d=this.settings.length;d>c;c+=1)if(this.settings[c].name===a){b=c;break}return b},ScreenSettings.prototype.findSettings=function(a){var b=this.findSettingsId(a);return-1!==b?this.settings[b]:void 0};