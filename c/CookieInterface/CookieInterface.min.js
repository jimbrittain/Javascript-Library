"use strict";function CookieInterface(){return void 0!==CookieInterface.prototype.singleton?CookieInterface.prototype.singleton:(CookieInterface.prototype.singleton=this,this.props=[],this.storage=this.hasStorage(),this.able=document.cookie||this.storage?!0:!1,void this.readExisting())}function CookieObject(a){this.name="",this.value="",this.value_type="",this.expires=null,this.path=this.defaultPath(),this.secure=!1,this.domain=this.defaultDomain(),this.maxage=null,this.created=(new Date).getTime(),this.master=new CookieInterface,this.beenSet=!1,void 0!==a&&this.init(a)}CookieInterface.prototype.hasStorage=function(){try{if("sessionStorage"in window&&window.sessionStorage.length>-1&&"localStorage"in window&&window.localStorage.length>-1)return!0}catch(a){}return!1},CookieInterface.prototype.getLength=function(){return this.props.length},CookieInterface.prototype.keys=function(a){var b=[],c=null;if(void 0===a){b=[];for(var d=0,e=this.props.length;e>d;d+=1)b.push(this.props[d].name);return b}return"string"==typeof a&&(c=this.findItem(a),void 0!==c)?c:(a=Number(a),!isNaN(a)&&a>0&&Math.floor(a)===a?(c=this.props[a],c instanceof CookieObject?c:void 0):null)},CookieInterface.prototype.readExisting=function(){var a=0,b=0,c=null,d=!1,e=null;if("sessionStorage"in window&&null!==window.sessionStorage&&window.sessionStorage.length>0)for(a=0,b=window.sessionStorage.length;b>a;a+=1)c=new CookieObject,e=window.sessionStorage.key(a),d=c.distillSession(e,window.sessionStorage.getItem(e)),d&&this.props.push(c);if("localStorage"in window&&null!==window.localStorage&&window.localStorage.length>0)for(a=0,b=window.localStorage.length;b>a;a+=1)c=new CookieObject,e=window.localStorage.key(a),d=c.distillLocal(e,window.localStorage.getItem(e)),d&&this.props.push(c);for(""!==document.cookie&&this.readCookies(),a=0,b=this.props.length;b>a;a+=1)(this.props[a].hasExpired()||this.props[a].isTooOld())&&(this.props[a].removeItem(),this.props.splice(a,1),b-=1,a-=1)},CookieInterface.prototype.readCookies=function(){for(var a=document.cookie.split("; "),b=null,c=!1,d=0,e=a.length;e>d;d+=1)b=new CookieObject,c=b.distillCookie(a[d]),c&&this.props.push(b)},CookieInterface.prototype.removeItem=function(a){var b=a instanceof CookieObject?a.name:a,c=!1;if("string"==typeof b)for(var d=0,e=this.props.length;e>d;d+=1)if(b===this.props[d]){c=this.props[d].remove(),this.props.splice(d,1);break}return!0},CookieInterface.prototype.findItemId=function(a){var b=a instanceof CookieObject?a.name:a,c=-1;if("string"==typeof b)for(var d=0,e=this.props.length;e>d;d+=1)if(b===this.props[d].name){c=d;break}return c},CookieInterface.prototype.hasItem=function(a){return-1===this.findItemId(a)?!1:!0},CookieInterface.prototype.findItem=function(a){var b=this.findItemId(a);return-1!==b?this.props[b]:void 0},CookieInterface.prototype.clear=function(a){var b=0,c=0;if(void 0!==a)if("session"===a)for(b=0,c=this.props.length;c>b;b+=1)null===this.props[b].expires&&(this.props[b].removeItem(),this.props.splice(b,1),c-=1,b-=1);else if("long"===a)for(b=0,c=this.props.length;c>b;b+=1)null!==this.props[b].expires&&(this.props[b].removeItem(),this.props.splice(b,1),c-=1,b-=1);else for(a="number"==typeof a?new Date(a):a,b=0,c=this.props.length;c>b;b+=1)this.props[b].expires===a&&(this.props[b].removeItem(),this.props.splice(b,1),c-=1,b-=1);else{for(b=0,c=this.props.length;c>b;b+=1)this.props[b].removeItem();this.props=[]}},CookieInterface.prototype.addItem=function(a){if(a=a instanceof CookieObject?a:new CookieObject(a),this.hasItem(a))this.setItem(a);else if(""!==a.name&&""!==a.value)return this.props.push(a),this.props[this.props.length-1]},CookieInterface.prototype.setItem=function(a){a=a instanceof CookieObject?a:new CookieObject(a);var b=null;return this.hasItem(a)?(b=this.findItem(a),b.beenSet&&(b.removeItem(),b.beenSet=!1),b.value!==a.value&&b.setValue(a.value),b.expires!==a.expires&&b.setExpires(a.expires),b.path!==a.path&&b.setPath(a.path),b.secure!==a.secure&&b.setSecure(a.secure),b.domain!==a.domain&&b.setDomain(a.domain),b.maxage!==a.maxage&&b.setMaxAge(a.maxage),b.created!==a.created&&b.setCreated(a.created)):b=this.addItem(a),b.setItem()},CookieObject.prototype.init=function(a){if("object"==typeof a)"name"in a&&this.setName(a.name),"value"in a&&this.setValue(a.value),"expires"in a&&this.setExpires(a.expires),"path"in a&&this.setPath(a.path),"secure"in a&&this.setSecure(a.secure),"domain"in a&&this.setDomain(a.domain);else if(2===arguments.length&&(this.setName(arguments[0]),this.setValue(arguments[1]),""===this.name))return!1},CookieObject.prototype.setName=function(a){"string"==typeof a&&(this.name=a)},CookieObject.prototype.cookName=function(){return encodeURIComponent(this.name)},CookieObject.prototype.cookValue=function(){var a=[this.value,null===this.expires?"session":this.expires.getTime(),this.created,this.path,this.secure,this.maxage,this.domain];return encodeURIComponent(a.join("**"))},CookieObject.prototype.distillValue=function(a){if(a="string"==typeof a?decodeURIComponent(a):"",a.length>0){var b=a.split("**");return 7===b.length?(this.setValue(b[0]),this.setExpires(b[1]),this.setCreated(b[2]),this.setPath(b[3]),this.setSecure(b[4]),this.setMaxAge(b[5]),this.setDomain(b[6]),!0):(this.name="",!1)}},CookieObject.prototype.hasExpired=function(){if(null===this.expires)return!1;var a=(new Date).getTime();return this.expires.getTime()<a?!0:!1},CookieObject.prototype.isTooOld=function(){if(null===this.maxage)return!1;var a=(new Date).getTime();return this.created+1e3*this.maxage<a?!0:!1},CookieObject.prototype.distillLocal=function(a,b){this.name=a;var c=this.distillValue(b);return this.beenSet=!0,c},CookieObject.prototype.distillSession=function(a,b){this.name=a;var c=this.distillValue(b);return this.beenSet=!0,c},CookieObject.prototype.distillCookie=function(a){var b=a.split("="),c=b[0],d=b[1];this.name=decodeURIComponent(c);var e=this.distillValue(d);return this.beenSet=!0,e},CookieObject.prototype.defaultPath=function(){return"/"},CookieObject.prototype.defaultDomain=function(){var a=window.location;return"host"in a?a.host:""},CookieObject.prototype.makeSecure=function(){return this.setSecure(!0)},CookieObject.prototype.setValue=function(a){this.value=a,this.beenSet&&this.setItem()},CookieObject.prototype.setSecure=function(a){this.beenSet&&this.removeItem(),this.secure=a===!0||1===a||"true"===a?!0:!1,this.beenSet&&this.setItem()},CookieObject.prototype.setCreated=function(a){this.beenSet&&this.removeItem(),a instanceof Date?this.created=a.getTime():"number"==typeof a&&Math.floor(a)===a&&a>-1&&(this.created=a),this.beenSet&&this.setItem()},CookieObject.prototype.setExpires=function(a){this.beenSet&&this.removeItem(),this.expires=a instanceof Date?a:"number"==typeof a&&Math.floor(a)===a&&a>-1?new Date(a):null,this.beenSet&&this.setItem()},CookieObject.prototype.setDomain=function(a){this.beenSet&&this.removeItem(),a="string"==typeof a?a:this.defaultDomain(),this.beenSet&&this.setItem()},CookieObject.prototype.setPath=function(a){this.beenSet&&this.removeItem(),a="string"==typeof a?a:this.defaultPath(),this.beenSet&&this.setItem()},CookieObject.prototype.setMaxAge=function(a){this.maxage="number"==typeof a&&a>-1&&Math.floor(a)===a?a:null},CookieObject.prototype.cookExpires=function(){return null!==this.expires?"expires="+this.expires.toUTCString()+";":""},CookieObject.prototype.cookMaxAge=function(){if(null!==this.maxage)return this.maxage;if(null===this.expires)return null;var a=new Date;return this.expires.getSeconds()-a.getSeconds()},CookieObject.prototype.cookPath=function(){return"path="+this.path+";"},CookieObject.prototype.cookDomain=function(){return"domain="+this.domain+";"},CookieObject.prototype.cookSecure=function(){return this.secure?"secure;":""},CookieObject.prototype.cook=function(){return this.master.able?this.cookName()+"="+this.cookValue()+";"+this.cookExpires()+this.cookPath()+this.cookMaxAge()+this.cookDomain()+this.cookSecure():""},CookieObject.prototype.needsCookie=function(){return this.secure||this.defaultDomain()!==this.domain||this.defaultPath()!==this.path?!0:!1},CookieObject.prototype.setItem=function(){if(!this.master.able)return!1;switch(this.determineMethod()){case 0:return document.cookie=this.cook(),this.beenSet=!0,!0;case 1:return this.determineStorage().setItem(this.cookName(),this.cookValue()),this.beenSet=!0,!0;default:return!1}},CookieObject.prototype.determineMethod=function(){return this.master.able?this.master.storage&&!this.needsCookie()?1:0:-1},CookieObject.prototype.determineStorage=function(){return null===this.expires?window.sessionStorage:window.localStorage},CookieObject.prototype.removeItem=function(){if(!this.master.able)return!1;switch(this.determineMethod()){case 0:var a=new Date((new Date).setDate((new Date).getDate()-1));return document.cookie=this.cookName()+"=null;expires="+a.toUTCString(),!0;case 1:return this.determineStorage().removeItem(this.cookName()),!0;default:return!1}};