"use strict";var adr=__imns("component.classes");if(!("InterpolateImages"in adr)){adr.InterpolateImages=function(){var a=__imns("component.classes");if(a.InterpolateImages.prototype.singleton)return a.InterpolateImages.prototype.singleton;if(a.InterpolateImages.prototype.singletonInstance=this,this.list=[],this.active=!1,this.resamplingMethod=-1,this.methods=[],"immaturedawn"in window&&"prepopulatedIIMethods"in window.immaturedawn&&window.immaturedawn.prepopulatedIIMethods.length>0)for(var b=0;b<window.immaturedawn.prepopulatedIIMethods.length;b+=1)this.addMethod(window.immaturedawn.prepopulatedIIMethods[b])},adr.InterpolateImages.prototype.hasResamplingMethod=function(){var a=__imns("util.classes");return-1===this.resamplingMethod&&(this.resamplingMethod=new a.SupportedCSSProperty("image-rendering").exists||new a.SupportedCSSProperty("msInterpolationMode").exists||new a.SupportedCSSProperty("msZoom").exists?!0:!1),this.resamplingMethod},adr.InterpolateImages.prototype.init=function(){var a=__imns("component.classes"),b=0;if(!this.hasResamplingMethod()){for(this.list=[],b=0;b<this.methods.length;b+=1)this.methods[b].test()||(this.methods.splice(b,1),b-=1);var c="getElementsByTagName"in document?document.getElementsByTagName("img"):"all"in document?document.all.tags("IMG"):"images"in document?document.images:[];if(this.methods.length>0&&c.length>0)for(b=0;b<c.length;b+=1)for(var d=new a.ImageInterpolater,e=0,f=this.methods.length;f>e;e+=1)if(this.methods[e].init(d)&&d.valid){this.addImage(d);break}this.list.length>0&&(this.active=!0)}return this.active},adr.InterpolateImages.prototype.imageExists=function(a){if(a instanceof HTMLImageElement){for(var b=0,c=this.list.length;c>b;b+=1)if(this.list[b].image===a)return!0;return!1}var d=__imns("util.debug");return(new d.IMDebugger).pass("InterpolateImages.imageExists was supplied an invalid image object"),!1},adr.InterpolateImages.prototype.addImage=function(a){var b=__imns("component.classes"),c=__imns("util.debug");return a instanceof b.ImageInterpolater?this.imageExists(a.image)?!1:(this.list.push(a),!0):((new c.IMDebugger).pass("InterpolateImages.addImage expects an ImageInterpolater Object"),!1)},adr.InterpolateImages.prototype.methodExists=function(a){var b=__imns("util.debug"),c=__imns("component.classes");if(a instanceof c.ImageInterpolateMethod){for(var d=0,e=this.methods.length;e>d;d+=1)if(a.name===this.methods[d].name)return this.methods[d];return!1}return(new b.IMDebugger).pass("InterpolateImages.method Exists expects an ImageInterpolateMethod Object"),!1},adr.InterpolateImages.prototype.addMethod=function(a){var b=__imns("component.classes"),c=__imns("util.debug");return a instanceof b.ImageInterpolateMethod?this.methodExists(a)?!1:(this.methods.push(a),!0):void(new c.IMDebugger).pass("InterpolateImages.addMethod expects an ImageInterpolateMethod Object")},adr.InterpolateImages.prototype.resolve=function(){if(!(this.list.length>0&&this.active))return!1;for(var a=0;a<this.list.length;a+=1)try{this.imageExists(this.list[a].image),this.methodExists(this.list[a].method)&&this.methodExists(this.list[a].method).apply(this.list[a])}catch(b){this.list.splice(a,1),a-=1}return this.list.length>0?!0:void 0},adr.ImageInterpolater=function(){this.image=null,this.src="",this.styleWidth=null,this.styleHeight=null,this.offsetWidth=null,this.offsetHeight=null,this.initalised=!1,this.ratio=null,this.w_h_ratio=1,this.h_w_ratio=1,this.method="untested",this.requiresReset=!1,this.transparentImagePath="img/spacer.png",this.valid=!1},adr.ImageInterpolater.prototype.valid=function(){return"auto"===this.styleWidth&&"auto"!==this.styleHeight||"auto"===this.styleHeight&&"auto"!==this.styleWidth?!0:!1},adr.ImageInterpolater.prototype.w_h_ratio=function(){return this.offsetWidth/this.offsetHeight},adr.ImageInterpolater.prototype.h_w_ratio=function(){return this.offsetHeight/this.offsetWidth},adr.ImageInterpolater.prototype.calculateWidth=function(){switch(this.ratio()){case"width":return this.image.offsetWidth+"px";case"height":default:return this.image.offHeight*this.h_w_ratio+"px"}},adr.ImageInterpolater.prototype.calculateHeight=function(){switch(this.ratio()){case"height":return this.image.offsetHeight+"px";case"width":default:return this.image.offsetWidth*this.w_h_ratio+"px"}},adr.ImageInterpolater.prototype.determineMethod=function(){return"untested"===this.method?!1:this.method},adr.ImageInterpolater.prototype.init=function(a){var b=a instanceof HTMLImageElement?!0:!1;b&&(this.image=a,this.method=this.determineMethod(),this.src=a.src,this.offsetWidth=a.offsetWidth,this.offsetHeight=a.offsetHeight,this.valid=!0)},adr.ImageInterpolateMethod=function(a){this.name="",this.applicable=!1,this.tested=!1,this._requiresReset=!1,this._init=null,this._test=null,this._apply=null,this.construction(a)},adr.ImageInterpolateMethod.prototype.correctObject=function(a){var b=__imns("component.classes");return a instanceof b.ImageInterpolater?!0:!1},adr.ImageInterpolateMethod.prototype.construction=function(a){if(a=void 0!==a&&1===a.length?a[0]:a,"name"in a){this.name=a.name;for(var b=["requiresRestart","init","test","apply"],c=["_requiresRestart","_init","_test","_apply"],d=0,e=b.length;e>d;d+=1)b[d]in a&&a.hasOwnProperty(b[d])&&("function"==typeof a[b[d]]?this[c[d]]=a[b[d]]:(a[b[d]]||!a[b[d]])&&(this[c]=a[b[d]]?!0:!1))}},adr.ImageInterpolateMethod.prototype.handleMethod=function(a,b){return a="_"+a,a in this?"function"==typeof this[a]?"args"in arguments&&b.length>0?this[a](b):this[a]():this[a]?!0:!1:!1},adr.ImageInterpolateMethod.prototype.requiresReset=function(a){return this.handleMethod("requiresReset",a)},adr.ImageInterpolateMethod.prototype.init=function(a){return this.handleMethod("init",a)},adr.ImageInterpolateMethod.prototype.apply=function(a){return this.handleMethod("apply",a)},adr.ImageInterpolateMethod.prototype.test=function(a){return this.handleMethod("test",a)};var cc=__imns("component.classes");window.immaturedawn={},window.immaturedawn.prepopulatedIIMethods=[],window.immaturedawn.prepopulatedIIMethods.push(new cc.ImageInterpolateMethod({name:"alpha_image_loader",init:function(a){if(this.correctObject(a)&&!a.initialised&&this.applicable)return this.test()&&this.requiresReset()?(a.image.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+a.src+'",sizingMethod="scale")',a.image.style.width=a.image.offsetWidth+"px",a.image.style.height=a.image.offsetHeight+"px",a.image.src=a.transparentImagePath,a.requiresReset=!0,a.initialised=!0,!0):!1;var b=__imns("util.debug");return(new b.IMDebugger).pass("Method expects an ImageInterpolater Object"),!1},requiresReset:function(a){if(this.correctObject(a)){var b=!1,c=a.image.currentStyle.width,d=a.image.currentStyle.height;return("auto"===c||"auto"===d)&&(b=!0,"auto"===c&&"auto"!==d?a.ratio="height":"auto"===a.styleHeight&&"auto"!==a.styleWidth?a.ratio="width":(b=!1,a.ratio="null")),b}var e=__imns("util.debug");return(new e.IMDebugger).pass("Method expects an ImageInterpolater Object"),!1},test:function(a){if(!this.tested){this.tested=!0;var b=this.correctObject(a)?a.image:"";(null===b||void 0===b)&&(document.all?b=document.all.body:"getElementsByTagName"in document&&(b=document.getElementsByTagName("body")[0]));var c=__imns("util.classes");this.applicable=new c.SupportedCSSProperty("filter").exists&&!new c.SupportedCSSProperty("imageRendering").exists&&!new c.SupportedCSSProperty("interpolationMode").exists&&"appVersion"in navigator&&parseInt(navigator.appVersion)<9&&/MSIE (\d+\.\d+);/.test(navigator.userAgent)&&!("opera"in window)?!0:!1}return this.applicable},apply:function(a){if(this.correctObject(a)&&this.applicable&&a.requiresReset){switch(a.ratio()){case"width":a.image.style.height=a.image.offsetWidth*a.h_w_ratio+"px";break;case"height":a.image.style.width=a.image.offsetHeight*a.w_h_ratio+"px";break;default:a.image.style.width=a.image.offsetWidth*a.h_w_ratio+"px",a.image.style.height=a.image.offsetHeight*a.w_h_ratio+"px"}return!0}var b=__imns("util.debug");return(new b.IMDebugger).pass("Method expects an ImageInterpolater Object"),!1}})),window.immaturedawn.prepopulatedIIMethods.push(new cc.ImageInterpolateMethod({name:"background-size",test:function(a){if(this.tested)return this.applicable;if(this.tested=!0,this.correctObj(a)){var b=__imns("util.classes");return this.applicable=new b.SupportedCSSProperty("backgroundSize").exists&&!new b.SupportedCSSProperty("imageRendering").exists&&!new b.SupportedCSSProperty("interpolationMode").exists&&"jQuery"in window?!0:!1,this.applicable}var c=__imns("util.debug");return(new c.IMDebugger).pass("Method expects an ImageInterpolater Object"),!1},init:function(a){var b=__imns("util.validation"),c=__imns("util.classes");if(!this.correctObj(a)||a.initialised||!this.test(a)){var d=__imns("util.debug");return(new d.IMDebugger).pass("Method expects an ImageInterpolater Object"),!1}if(b.isElementAnOnlyChild(a.image)){var e=$(a.image).parent();if(("block"===e.css("display")||"inline-block"===e.css("display"))&&e.contents().length<=1&&"none"===e.css("background-image")&&"transparent"===$(a.image).css("background-color")){e.css("background-image","url("+$(a.image).attr("src")+")").css("background-repeat","no-repeat").css(new c.SupportedCSSProperty("backgroundSize").cssProperty,$(a.image).css("width")+" "+$(a.image).css("height")),"transparent"!==$(a.image).css("background-color")&&e.css("background-color",$(a.image).css("background-color"));var f=$(a.image).css("margin-top"),g=$(a.image).css("margin-left"),h=$(a.image).parent().css("margin-top"),i=$(a.image).parent().css("margin-left");return f="auto"===f||"auto"===h?"50%":f,g="auto"===g||"auto"===i?"50%":g,e.css("background-position",g+" "+f),$(a.image).css("visibility","hidden"),a.requiresReset=!1,a.initialised=!0,!0}return!1}},requiresReset:!1,apply:function(){return!1}}))}