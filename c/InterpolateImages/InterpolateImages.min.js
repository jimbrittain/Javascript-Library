"use strict";function InterpolateImages(){if(InterpolateImages.prototype.singletonInstance)return InterpolateImages.prototype.singletonInstance;if(InterpolateImages.prototype.singletonInstance=this,this.list=[],this.active=!1,this.resamplingMethod=-1,this.methods=[],"immaturedawn"in window&&"prepopulatedIIMethods"in window.immaturedawn&&window.immaturedawn.prepopulatedIIMethods.length>0)for(var a=0;a<window.immaturedawn.prepopulatedIIMethods.length;a+=1)this.addMethod(window.immaturedawn.prepopulatedIIMethods[a])}function ImageInterpolater(){this.image=null,this.src="",this.styleWidth=null,this.styleHeight=null,this.offsetWidth=null,this.offsetHeight=null,this.initalised=!1,this.ratio=null,this.w_h_ratio=1,this.h_w_ratio=1,this.method="untested",this.requiresReset=!1,this.transparentImagePath="img/spacer.png",this.valid=!1}function ImageInterpolateMethod(a){this.name="",this.applicable=!1,this.tested=!1,this._requiresReset=!1,this._init=null,this._test=null,this._apply=null,this.construction(a)}InterpolateImages.prototype.hasResamplingMethod=function(){return-1===this.resamplingMethod&&(this.resamplingMethod=new SupportedCSSProperty("image-rendering").exists||new SupportedCSSProperty("msInterpolationMode").exists||new SupportedCSSProperty("msZoom").exists?!0:!1),this.resamplingMethod},InterpolateImages.prototype.init=function(){var a=0;if(!this.hasResamplingMethod()){for(this.list=[],a=0;a<this.methods.length;a+=1)this.methods[a].test()||(this.methods.splice(a,1),a-=1);var b="getElementsByTagName"in document?document.getElementsByTagName("img"):"all"in document?document.all.tags("IMG"):"images"in document?document.images:[];if(this.methods.length>0&&b.length>0)for(a=0;a<b.length;a+=1)for(var c=new ImageInterpolater,d=0,e=this.methods.length;e>d;d+=1)if(this.methods[d].init(c)&&c.valid){this.addImage(c);break}this.list.length>0&&(this.active=!0)}return this.active},InterpolateImages.prototype.imageExists=function(a){if(a instanceof HTMLImageElement){for(var b=0,c=this.list.length;c>b;b+=1)if(this.list[b].image===a)return!0;return!1}return(new IMDebugger).pass("InterpolateImages.imageExists was supplied an invalid image object"),!1},InterpolateImages.prototype.addImage=function(a){return a instanceof ImageInterpolater?this.imageExists(a.image)?!1:(this.list.push(a),!0):((new IMDebugger).pass("InterpolateImages.addImage expects an ImageInterpolater Object"),!1)},InterpolateImages.prototype.methodExists=function(a){if(a instanceof ImageInterpolateMethod){for(var b=0,c=this.methods.length;c>b;b+=1)if(a.name===this.methods[b].name)return this.methods[b];return!1}return(new IMDebugger).pass("InterpolateImages.method Exists expects an ImageInterpolateMethod Object"),!1},InterpolateImages.prototype.addMethod=function(a){return a instanceof ImageInterpolateMethod?this.methodExists(a)?!1:(this.methods.push(a),!0):void(new IMDebugger).pass("InterpolateImages.addMethod expects an ImageInterpolateMethod Object")},InterpolateImages.prototype.resolve=function(){if(!(this.list.length>0&&this.active))return!1;for(var a=0;a<this.list.length;a+=1)try{this.imageExists(this.list[a].image),this.methodExists(this.list[a].method)&&this.methodExists(this.list[a].method).apply(this.list[a])}catch(b){this.list.splice(a,1),a-=1}return this.list.length>0?!0:void 0},ImageInterpolater.prototype.valid=function(){return"auto"===this.styleWidth&&"auto"!==this.styleHeight||"auto"===this.styleHeight&&"auto"!==this.styleWidth?!0:!1},ImageInterpolater.prototype.w_h_ratio=function(){return this.offsetWidth/this.offsetHeight},ImageInterpolater.prototype.h_w_ratio=function(){return this.offsetHeight/this.offsetWidth},ImageInterpolater.prototype.calculateWidth=function(){switch(this.ratio()){case"width":return this.image.offsetWidth+"px";case"height":default:return this.image.offHeight*this.h_w_ratio+"px"}},ImageInterpolater.prototype.calculateHeight=function(){switch(this.ratio()){case"height":return this.image.offsetHeight+"px";case"width":default:return this.image.offsetWidth*this.w_h_ratio+"px"}},ImageInterpolater.prototype.determineMethod=function(){return"untested"===this.method?!1:this.method},ImageInterpolater.prototype.init=function(a){var b=a instanceof HTMLImageElement?!0:!1;b&&(this.image=a,this.method=this.determineMethod(),this.src=a.src,this.offsetWidth=a.offsetWidth,this.offsetHeight=a.offsetHeight,this.valid=!0)},ImageInterpolateMethod.prototype.correctObject=function(a){return a instanceof ImageInterpolater?!0:!1},ImageInterpolateMethod.prototype.construction=function(a){if(a=void 0!==a&&1===a.length?a[0]:a,"name"in a){this.name=a.name;for(var b=["requiresRestart","init","test","apply"],c=["_requiresRestart","_init","_test","_apply"],d=0,e=b.length;e>d;d+=1)b[d]in a&&a.hasOwnProperty(b[d])&&("function"==typeof a[b[d]]?this[c[d]]=a[b[d]]:(a[b[d]]||!a[b[d]])&&(this[c]=a[b[d]]?!0:!1))}},ImageInterpolateMethod.prototype.handleMethod=function(a,b){return a="_"+a,a in this?"function"==typeof this[a]?"args"in arguments&&b.length>0?this[a](b):this[a]():this[a]?!0:!1:!1},ImageInterpolateMethod.prototype.requiresReset=function(a){return this.handleMethod("requiresReset",a)},ImageInterpolateMethod.prototype.init=function(a){return this.handleMethod("init",a)},ImageInterpolateMethod.prototype.apply=function(a){return this.handleMethod("apply",a)},ImageInterpolateMethod.prototype.test=function(a){return this.handleMethod("test",a)},window.immaturedawn={},window.immaturedawn.prepopulatedIIMethods=[],window.immaturedawn.prepopulatedIIMethods.push(new ImageInterpolateMethod({name:"alpha_image_loader",init:function(a){return this.correctObject(a)&&!a.initialised&&this.applicable?this.test()&&this.requiresReset()?(a.image.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+a.src+'",sizingMethod="scale")',a.image.style.width=a.image.offsetWidth+"px",a.image.style.height=a.image.offsetHeight+"px",a.image.src=a.transparentImagePath,a.requiresReset=!0,a.initialised=!0,!0):!1:((new IMDebugger).pass("Method expects an ImageInterpolater Object"),!1)},requiresReset:function(a){if(this.correctObject(a)){var b=!1,c=a.image.currentStyle.width,d=a.image.currentStyle.height;return("auto"===c||"auto"===d)&&(b=!0,"auto"===c&&"auto"!==d?a.ratio="height":"auto"===a.styleHeight&&"auto"!==a.styleWidth?a.ratio="width":(b=!1,a.ratio="null")),b}return(new IMDebugger).pass("Method expects an ImageInterpolater Object"),!1},test:function(a){if(!this.tested){this.tested=!0;var b=this.correctObject(a)?a.image:"";(null===b||void 0===b)&&(document.all?b=document.all.body:"getElementsByTagName"in document&&(b=document.getElementsByTagName("body")[0])),this.applicable=new SupportedCSSProperty("filter").exists&&!new SupportedCSSProperty("imageRendering").exists&&!new SupportedCSSProperty("interpolationMode").exists&&"appVersion"in navigator&&parseInt(navigator.appVersion)<9&&/MSIE (\d+\.\d+);/.test(navigator.userAgent)&&!("opera"in window)?!0:!1}return this.applicable},apply:function(a){if(this.correctObject(a)&&this.applicable&&a.requiresReset){switch(a.ratio()){case"width":a.image.style.height=a.image.offsetWidth*a.h_w_ratio+"px";break;case"height":a.image.style.width=a.image.offsetHeight*a.w_h_ratio+"px";break;default:a.image.style.width=a.image.offsetWidth*a.h_w_ratio+"px",a.image.style.height=a.image.offsetHeight*a.w_h_ratio+"px"}return!0}return(new IMDebugger).pass("Method expects an ImageInterpolater Object"),!1}})),window.immaturedawn.prepopulatedIIMethods.push(new ImageInterpolateMethod({name:"background-size",test:function(a){return this.tested?this.applicable:(this.tested=!0,this.correctObj(a)?(this.applicable=new SupportedCSSProperty("backgroundSize").exists&&!new SupportedCSSProperty("imageRendering").exists&&!new SupportedCSSProperty("interpolationMode").exists&&"jQuery"in window?!0:!1,this.applicable):((new IMDebugger).pass("Method expects an ImageInterpolater Object"),!1))},init:function(a){if(!this.correctObj(a)||a.initialised||!this.test(a))return(new IMDebugger).pass("Method expects an ImageInterpolater Object"),!1;if(isElementAnOnlyChild(a.image)){var b=$(a.image).parent();if(("block"===b.css("display")||"inline-block"===b.css("display"))&&b.contents().length<=1&&"none"===b.css("background-image")&&"transparent"===$(a.image).css("background-color")){b.css("background-image","url("+$(a.image).attr("src")+")").css("background-repeat","no-repeat").css(new SupportedCSSProperty("backgroundSize").cssProperty,$(a.image).css("width")+" "+$(a.image).css("height")),"transparent"!==$(a.image).css("background-color")&&b.css("background-color",$(a.image).css("background-color"));var c=$(a.image).css("margin-top"),d=$(a.image).css("margin-left"),e=$(a.image).parent().css("margin-top"),f=$(a.image).parent().css("margin-left");return c="auto"===c||"auto"===e?"50%":c,d="auto"===d||"auto"===f?"50%":d,b.css("background-position",d+" "+c),$(a.image).css("visibility","hidden"),a.requiresReset=!1,a.initialised=!0,!0}return!1}},requiresReset:!1,apply:function(){return!1}}));