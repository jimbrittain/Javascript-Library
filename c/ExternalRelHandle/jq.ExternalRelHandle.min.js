"use strict";function ExternalWindowProfile(a,b,c){this.classname=void 0!==a?a:"",this.options=void 0!==b?b:"",this.windowname=void 0!==c?c:""}function ExternalWindowProfiles(){return ExternalWindowProfiles.prototype.singletonInstance?ExternalWindowProfiles.prototype.singletonInstance:(ExternalWindowProfiles.prototype.singletonInstance=this,void(this.list=[]))}function ExternalRelHandle(){if(ExternalRelHandle.prototype.singletonInstance)return ExternalRelHandle.prototype.singletonInstance;ExternalRelHandle.prototype.singletonInstance=this,this.windowsAllowed=!!$.isFunction(window.open),this.firstUse=!0,this.ext_window_reference=null,this.profiles=new ExternalWindowProfiles;var a=this;$(document).ready(function(){a.init()}),this.processedElements=[]}ExternalWindowProfiles.prototype.returnSettings=function(a){$.isArray(a)||(a="string"==typeof a?a.split(" "):[]);for(var b=null,c=0;c<this.list.length&&null===b;){for(var d=0,e=a.length;d<e;d+=1)if(this.list[c].classname===a[d]){b=this.list[c];break}c+=1}return b=null===b?new ExternalWindowProfile:b},ExternalWindowProfiles.prototype.addProfile=function(a){if(a instanceof ExternalWindowProfile){for(var b=!1,c=0,d=this.list.length;c<d;c+=1)if(this.list[c].classname===a.classname){b=!0;break}return!b&&(this.list.push(a),!0)}return(new IMDebugger).pass("ExternalRefHandle.addProfile: Requires ExternalRefProfile."),!1},ExternalRelHandle.prototype.elementProcessed=function(a){for(var b=!1,c=0,d=this.processedElements.length;c<d;c+=1)if(this.processedElements[c]===a)return b=!0,!0;return b},ExternalRelHandle.prototype.init=function(){if(this.windowsAllowed){var a=this;$('a[rel="external"]').each(function(){a.elementProcessed(this)||(a.processedElements.push(this),$(this).bind("click",function(b){b=b||window.event;var c=!1;if(a.windowsAllowed){var d=$(this).attr("href"),e=$(this).attr("class"),f=a.profiles.returnSettings(e);c=a.openWindow(d,f.options,f.windowName)}else c=!0;return!!c||("stopPropagation"in b&&b.stopPropagation(),"cancelBubble"in b&&(b.cancelBubble=!0),"preventDefault"in b&&b.preventDefault(),!1)}))})}else this.createTargets()},ExternalRelHandle.prototype.openWindow=function(a,b,c){var d=""!==c?c:"name",e=""!==b?b:"";if(this.windowsAllowed){if(null!==this.ext_window_reference)try{this.ext_window_reference.close()}catch(a){}if(this.ext_window_reference=window.open(a,d,e),this.firstUse){this.firstUse=!1;try{this.ext_window_reference.focus()}catch(a){return this.windowsAllowed=!1,this.createTargets(),!0}}else this.ext_window_reference.focus();return!1}return!0},ExternalRelHandle.prototype.createTargets=function(){var a=this;$('a[rel="external"]').each(function(){$(this).unbind("click",a.clickAction),$(this).attr("target","_blank")})};