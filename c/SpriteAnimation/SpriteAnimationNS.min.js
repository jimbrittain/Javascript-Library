"use strict";var adr=__imns("util.classes");"SpriteAnimation"in adr||(adr.SpriteAnimation=function(a){this.initiated=!1,this.element=null,this.container=null,this.direction="left",this.fps=24,this.end="end",this._end=null,this.endKeywords=["start","end","bounce","infinite"],this.animation=null,this.starttime=null,this.to=null,this.clean=!0;var b=__imns("util.tools"),c=this;b.fetter(window,"load",[c,function(){c.init(a)}],!0,"after")},adr.SpriteAnimation.prototype.init=function(a){var b=__imns("application.vars"),c=__imns("util.tools"),d=__imns("util.validation");if(this.fps=void 0!==b.fps&&d.isNumber(b.fps)?b.fps:this.fps,d.isHTMLElement(a))this.setElement(a),this.setContainer(),this.determineDirection();else if("object"==typeof a){var e={element:null,container:null,direction:null,clean:!1,end:null,endFunction:null,fps:null},f=c.handlePassedArguments(a,e);this.setClean(f.clean),this.setElement(f.element),this.setContainer(f.container),this.setFPS(f.fps),this.setDirection(f.direction),this.setEnd(null!==this.endFunction?f.endFunction:f.end)}this.establish()},adr.SpriteAnimation.prototype.determineDirection=function(){{var a=__imns("util.classes");__imns("util.dom")}if(null!==this.element){var b=new a.BoundaryCoordinates(this.element),c=new a.BoundaryCoordinates(this.container);if(c.width<b.width)return b.x1<c.x1?"right":"left";if(c.height<b.height)return b.y1<c.y1?"bottom":"top"}return"left"},adr.SpriteAnimation.prototype.play=function(){var a=__imns("util.classes"),b=__imns("util.tools");a.SpriteAnimation.prototype.id=void 0===a.SpriteAnimation.prototype.id?1:a.SpriteAnimation.prototype.id+1;var c="imspriteanimation"+a.SpriteAnimation.prototype.id;if(new a.SupportedCSSProperty("animation").exists){var d="",e=this;switch(this.element.style[new a.SupportedCSSProperty("animation-timing-function").jsProperty]="steps("+(this.frames()-1)+")","bounce"!==this.end?(this.element.style[new a.SupportedCSSProperty("animation-duration").jsProperty]=this.duration()+"s",d="0% { "+this.direction+": 0; } 100% { "+this.direction+": "+this.distance()+"px; }"):(this.element.style[new a.SupportedCSSProperty("animation-duration").jsProperty]=2*this.duration()+"s",d="0% { "+this.direction+": 0; } 50% { "+this.direction+": "+this.distance()+"px; } 100% { "+this.direction+":0; }"),this.end){case"bounce":case"infinite":this.element.style[new a.SupportedCSSProperty("animation-fill-mode").jsProperty]="infinite";break;case"start":this.element.style[new a.SupportedCSSProperty("animation-fill-mode").jsProperty]="backwards";break;case"end":this.element.style[new a.SupportedCSSProperty("animation-fill-mode").jsProperty]="forwards";break;case"function":this.element.style[new a.SupportedCSSProperty("animation-fill-mode").jsProperty]="forwards"}"bounce"!==this.end&&"infinite"!==this.end&&(this.to=setTimeout(function(){e.complete()},parseInt(1e3*this.duration())+50));{b.addKeyframes(c,d)}return this.element.style[new a.SupportedCSSProperty("animation-name").jsProperty]=c,!0}var f={element:this.element,descriptor:c,duration:parseInt(1e3*this.duration())+"ms","timing-function":"linear",property:[this.direction,0,this.distance()],endFunction:function(){e.complete()}};this.animation=new a.Animation(f),this.animation.setFPS(this.fps),this.animation.forceJSAnimate(),this.animation.run()},adr.SpriteAnimation.prototype.duration=function(){return this.frames()/this.fps},adr.SpriteAnimation.prototype.setClean=function(a){var b=__imns("util.validation");return b.isBoolean(a)?(this.clean=a,!0):!1},adr.SpriteAnimation.prototype.setEnd=function(a){var b=__imns("util.tools"),c=__imns("util.validation");return c.isString(a)&&b.inArray(a,this.endKeywords)?(this.end=a,!0):c.isFunction(a)?(this.end="end",this._end=a,!0):!1},adr.SpriteAnimation.prototype.complete=function(){var a=__imns("util.classes");null!==this.animation?this.animation=null:this.clean&&(this.element.style[new a.SupportedCSSProperty("animation-name").jsProperty]="",this.element.style[new a.SupportedCSSProperty("animation-timing-function").jsProperty]="",this.element.style[new a.SupportedCSSProperty("animation-property").jsProperty]="",this.element.style[new a.SupportedCSSProperty("animation-fill-mode").jsProperty]=""),"function"===this.end&&null!==this._end&&this._end()},adr.SpriteAnimation.prototype.setElement=function(a){var b=__imns("util.validation");return b.isHTMLElement(a)?(this.element=a,!0):!1},adr.SpriteAnimation.prototype.setContainer=function(a){var b=__imns("util.validation"),c=__imns("util.dom");return b.isHTMLElement(a)&&b.isChildOf(this.element,a)?(this.container=a,!0):(this.container=c.findParent(this.element),!1)},adr.SpriteAnimation.prototype.setDirection=function(a){var b=__imns("util.validation");if(b.isString(a))switch(a=a.toLowerCase()){case"lr":case"left":case"l":return this.direction="left",!0;case"rl":case"right":case"r":return this.direction="right",!0;case"tb":case"top":case"t":return this.direction="top",!0;case"bt":case"bottom":case"b":return this.direction="bottom",!0}return!1},adr.SpriteAnimation.prototype.setFPS=function(a){var b=__imns("util.validation");return b.isNumber(a)&&a>0&&parseFloat(a)===parseInt(a)?(this.fps=a,!0):!1},adr.SpriteAnimation.prototype.length=function(){var a=__imns("util.dom");return parseFloat("left"===this.direction||"right"===this.direction?a.findElementStyle(this.element,"offsetWidth"):a.findElementStyle(this.element,"offsetHeight"))},adr.SpriteAnimation.prototype.distance=function(){return 0-this.length()+this.frameWidth()},adr.SpriteAnimation.prototype.frameWidth=function(){var a=__imns("util.dom"),b="left"===this.direction||"right"===this.direction?"Width":"Height",c=parseFloat(a.findElementStyle(this.container,"inner"+b));return c},adr.SpriteAnimation.prototype.frames=function(){var a=__imns("util.dom"),b="left"===this.direction||"right"===this.direction?"Width":"Height",c=parseFloat(a.findElementStyle(this.container,"inner"+b)),d=parseFloat(a.findElementStyle(this.element,"offset"+b));return Math.round(d/c)},adr.SpriteAnimation.prototype.currentFrame=function(){var a=__imns("util.dom"),b="left"===this.direction||"right"===this.direction?"Width":"Height",c=parseFloat(a.findElementStyle(this.container,"inner"+b)),d=parseFloat(a.findElementStyle(this.element,this.direction));return Math.round(d/c)},adr.SpriteAnimation.prototype.establish=function(){var a=__imns("util.dom");return null!==this.element&&null!==this.container&&("relative"!==a.findElementStyle(this.container,"position")&&(this.container.style.position="relative"),"absolute"!==a.findElementStyle(this.element,"position")&&(this.element.style.position="absolute"),this.ensureContainerOverflow()),!1},adr.SpriteAnimation.prototype.ensureContainerOverflow=function(){var a,b,c=__imns("util.classes"),d=__imns("util.dom"),e=__imns("util.validation");return e.isHTMLElement(this.container)?(b=d.findElementStyle(this.container,"overflow"),"hidden"!==b&&new c.SupportedCSSProperty("overflow-x").exists?"top"===this.direction||"bottom"===this.direction?(a=d.findElementStyle(this.container,new c.SupportedCSSProperty("overflow-y").cssProperty),"hidden"!==a&&(this.container.style[new c.SupportedCSSProperty("overflow-y").jsProperty]="hidden"),!0):(a=d.findElementStyle(this.container,new c.SupportedCSSProperty("overflow-x").cssProperty),"hidden"!==a&&(this.container.style[new c.SupportedCSSProperty("overflow-x").jsProperty]="hidden"),!0):(this.container.style.overflow="hidden",!0)):!1});