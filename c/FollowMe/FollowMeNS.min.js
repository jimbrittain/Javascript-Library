"use strict";var adr=__imns("component.classes");"FollowMe"in adr||(adr.FollowMe=function(){var a=__imns("component.classes");return void 0!==a.FollowMe.prototype.singleton?a.FollowMe.prototype.singleton:(a.FollowMe.prototype.singleton=this,this.enabled=!1,this.anim=null,this.element=null,this.top_limit=0,this.bottom_limit=0,this.offset=12,this.duration=150,this.destination=null,this.bottom_offset=0,this.animation_started=(new Date).getTime(),this.__cssanimate=-1,void(this.__functional=null))},adr.FollowMe.prototype.shouldCSSAnimate=function(){var a=__imns("util.classes");return-1===this.__cssanimate&&(this.__cssanimate=new a.SupportedCSSProperty("transition-property").exists?!0:!1),this.__cssanimate},adr.FollowMe.prototype.getAnimationTime=function(){var a=this.animation_started-(new Date).getTime();return a>this.duration?this.duration:150},adr.FollowMe.prototype.isFunctional=function(){return null!==this.__functional&&"function"==typeof this.__functional?this.__functional()?!0:!1:!0},adr.FollowMe.prototype.assignFunctional=function(a){return void 0!==a&&"function"==typeof a?(this.__functional=a,!0):!1},adr.FollowMe.prototype.init=function(a){var b=__imns("util.validation"),c=__imns("util.classes"),d=__imns("util.tools");void 0!==a&&(b.isHTMLElement(a)?this.element=a:"object"==typeof a&&("element"in a&&this.setElement(a.element),"duration"in a&&this.setDuration(a.duration),"functional"in a&&this.assignFunctional(a.functional),"offset"in a&&this.setOffset(a.offset),"limit"in a&&("top"in a.limit||"bottom"in a.limit)&&("top"in a.limit&&this.setTopLimit(a.limit.top),"bottom"in a.limit&&this.setBottomLimit(a.limit.bottom)),"bottom_offset"in a&&this.setBottomOffset(a.bottom_offset))),this.anim=new c.Animation({element:this.element,descriptor:"FollowMe"}),this.anim.master.fps=60;var e=this;d.fetter(window,"scroll",[e,function(){var a=__imns("util.tools");a.debounce(function(){e.apply(e)},20)}]),this.enabled=this.isFunctional()},adr.FollowMe.prototype.setElement=function(a){var b=__imns("util.validation");return void 0!==a&&b.isHTMLElement(a)?(this.element=a,!0):!1},adr.FollowMe.prototype.setDuration=function(a){var b=__imns("util.validation");if(void 0!==a){var c=parseFloat(a);if(b.isNumber(c))return c*=b.isSeconds(a)?1e3:1,this.duration=c,!0}return!1},adr.FollowMe.prototype.setOffset=function(a){var b=__imns("util.validation");return b.isNumber(a)&&a>0?(this.offset=a,!0):!1},adr.FollowMe.prototype.setBottomOffset=function(a){var b=__imns("util.validation");return b.isNumber(a)&&a>0?(this.bottom_offset=a,!0):!1},adr.FollowMe.prototype.setTopLimit=function(a){var b=__imns("util.validation");return b.isNumber(a)&&a>0?(this.top_limit=a,!0):!1},adr.FollowMe.prototype.setBottomLimit=function(a){var b=__imns("util.validation");return b.isNumber(a)&&a>0?(this.bottom_limit=a,!0):!1},adr.FollowMe.prototype.refreshLimits=function(){var a=__imns("util.classes"),b=new a.ScreenProperties;this.bottom_limit=b.documentHeight()-this.bottom_offset},adr.FollowMe.prototype.moveTo=function(a){var b=__imns("util.classes"),c=__imns("util.dom");if(this.destination!==a)if(this.destination=a,this.shouldCSSAnimate())this.element.style[new b.SupportedCSSProperty("transition-duration").jsProperty]=this.getAnimationTime(),this.element.style.top=this.destination+"px";else{this.anim.pause();{c.findElementStyle(this.element,"top")}this.anim.addProperty({property:"top",end:this.destination+"px"}),this.anim.run()}},adr.FollowMe.prototype.apply=function(){var a=__imns("util.classes");if(this.enabled&&this.isFunctional()){var b=(new a.ScreenProperties).offsetY();if(this.refreshLimits(),isNaN(Number(b)))this.enabled=this.isFunctional();else{var c=b+this.offset;c=c<this.top_limit?this.top_limit:c,c=c>this.bottom_limit?this.bottom_limit:c,this.moveTo(c),this.animation_started=(new Date).getTime()}}});