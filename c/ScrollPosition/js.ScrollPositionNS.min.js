"use strict";var adr=__imns("component.classes");"ScrollPosition"in adr||(adr.ScrollPositionMaster=function(){var a=__imns("component.classes");return void 0!==a.ScrollPositionMaster.prototype.singleton?a.ScrollPositionMaster.prototype.singleton:(a.ScrollPositionMaster.prototype.singleton=this,this.child_id=0,this.default_anim_props={duration:2e3,timingFunction:"ease-in-out"},this.anim=null,this.scrollCheckElement=null,this.possible=!1,this.justdone=!1,this.timeout_id=null,this.timeout_ms=5,this.init(),this)},adr.ScrollPositionMaster.prototype.init=function(){this.createScrollHider()},adr.ScrollPositionMaster.prototype.userCancelInit=function(){var a=__imns("util.tools"),b=__imns("component.classes"),c=this;a.fetter(window,"scroll",[c,function(){(new b.ScrollPositionMaster).userCancel()}],!0)},adr.ScrollPositionMaster.prototype.userCancelAbort=function(){var a=__imns("util.tools"),b=__imns("component.classes"),c=this;a.unfetter(window,"scroll",[c,function(){(new b.ScrollPositionMaster).userCancel()}],!0)},adr.ScrollPositionMaster.prototype.userCancel=function(){return this.justdone?!0:void(this.anim.animating&&(this.anim.pause(),this.anim.clear(),this.userCancelAbort()))},adr.ScrollPositionMaster.prototype.createScrollHider=function(){var a=__imns("util.tools"),b=__imns("util.dom"),c=__imns("util.validation"),d=__imns("component.classes"),e=this;null===this.scrollCheckElement&&a.fetter(document,"DOMContentLoaded",[e,function(){var a=null;"createElement"in document&&"appendChild"in document.body?(a=document.createElement("div"),b.setAttribute(a,"id","spm_scrollcheckelement"),b.setAttribute(a,"style","visibility:hidden !important;position:absolute;top:0;left:0;z-index:10000000;"),document.body.appendChild(a)):(a='<div id="spm_scrollcheckelement" style="visibility:hidden !important;position:absolute;top:0;left:0;z-index:10000000;"></div>',"body"in document&&"innerHTML"in document.body&&(document.body.innerHTML+=a),a=b.findElementByID("spm_scrollcheckelement")),(new d.ScrollPositionMaster).scrollCheckElement=void 0!==a&&c.isHTMLElement(a)?a:null,(new d.ScrollPositionMaster).possible=null!==(new d.ScrollPositionMaster).scrollCheckElement?!0:!1}],!0,"after")},adr.ScrollPositionMaster.prototype.animateTo=function(a,b){{var c=__imns("util.classes"),d=__imns("component.classes");__imns("util.dom")}return null!==this.anim&&(this.anim.pause(),this.anim.clear()),this.anim=new c.Animation(this.default_anim_props),this.anim.element=this.scrollCheckElement,this.anim.element.style.top=(new c.ScreenProperties).offsetY()+"px",this.anim.element.style.left=(new c.ScreenProperties).offsetX()+"px",this.anim.forceJSAnimation=!0,this.userCancelAbort(),this.userCancelInit(),this.anim.addEndFunction(function(){(new d.ScrollPositionMaster).userCancelAbort()}),a instanceof c.Coordinates||isNaN(Number(a))||(a=new c.Coordinates(a,a)),b="x"===b||"y"===b||"both"===b?b:"y",("y"===b||"both"===b)&&this.anim.addProperty({name:"custom_scroll_y",start:(new c.ScreenProperties).offsetY(),end:a.y,custom:{get:function(){var a=__imns("component.classes"),b=__imns("util.dom"),c=(new a.ScrollPositionMaster).scrollCheckElement;return b.findElementStyle(c,"top")},set:function(a,b){var c=__imns("component.classes"),d=__imns("util.dom"),e=new c.ScrollPositionMaster,f=e.scrollCheckElement;f.style.top=b,e.justdone=!0,window.scroll(Math.round(parseFloat(d.findElementStyle(f,"left"))),Math.round(parseFloat(b))),null!==e.timeout_id&&(clearTimeout(e.timeout_id),e.timeout_id=null),e.timeout_id=setTimeout(function(){(new c.ScrollPositionMaster).justdone=!1,e.timeout_id=null},e.timeout_ms)}}}),("x"===b||"both"===b)&&this.anim.addProperty({name:"custom_scroll_x",start:(new c.ScreenProperties).offsetX(),end:a.x,custom:{get:function(){var a=__imns("component.classes"),b=__imns("util.dom"),c=(new a.ScrollPositionMaster).scrollCheckElement;return b.findElementStyle(c,"left")},set:function(a,b){var c=__imns("component.classes"),d=__imns("util.dom"),e=new c.ScrollPositionMaster;e.scrollCheckElement.style.left=b;var f=e.scrollCheckElement;e.justdone=!0,window.scroll(parseInt(b),parseInt(d.findElementStyle(f,"top"))),null!==e.timeout_id&&(clearTimeout(e.timeout_id),e.timeout_id=null),e.timeout_id=setTimeout(function(){(new c.ScrollPositionMaster).justdone=!1,e.timeout_id=null},e.timeout_ms)}}}),this.anim.run(),!0},adr.ScrollPositionMaster.prototype.scrollToElement=function(a,b){var c=__imns("util.validation"),d=__imns("component.classes");if(void 0!==a&&c.isHTMLElement(a)){var e=new d.ScrollPositional({elements:a});void 0!==b&&e.setAxis(b),e.goto(a)}},adr.ScrollPosition=function(a){this.element=null,this.coordinates=null,this.id="",void 0!==a&&this.init(a)},adr.ScrollPosition.prototype.init=function(a){this.setElement(a)},adr.ScrollPosition.prototype.setElement=function(a){var b=__imns("util.classes"),c=__imns("util.tools"),d=(__imns("util.dom"),__imns("util.validation"));return void 0!==a&&d.isHTMLElement(a)&&c.inVisibleDOM(a)?(this.element=a,this.coordinates=new b.BoundaryCoordinates(this.element),this.id=c.getAttribute(this.element,"id"),!0):!1},adr.ScrollPositional=function(a){var b=__imns("component.classes");this.master=new b.ScrollPositionMaster,this.enabled=!1,this._functional=null,this.positions=[],this.axis="y",void 0!==a&&this.init(a)},adr.ScrollPositional.prototype.init=function(a){"elements"in a&&this.addElements(a.elements),"functional"in a&&this.setFunctional(a.functional)},adr.ScrollPositional.prototype.isFunctional=function(){return null!==this._functional&&"function"==typeof this._functional?this._functional():!0},adr.ScrollPositional.prototype.setFunctional=function(a){return void 0!==a&&"function"==typeof a?(this._functional=a,!0):!1},adr.ScrollPositional.prototype.setAxis=function(a){if("string"==typeof a)switch(a=a.toLowerCase()){case"x":case"horizontal":this.axis="x";break;case"both":this.axis="both";break;case"y":case"vertical":default:this.axis="y"}else this.axis="y";return this.axis},adr.ScrollPositional.prototype.addElement=function(a){var b,c=__imns("util.validation"),d=__imns("component.classes"),e=this.positions.length;a=c.isArray(a)?a:[a];for(var f=0,g=a.length;g>f;f+=1)void 0!==a[f]&&c.isHTMLElement(a[f])&&(b=new d.ScrollPosition,b.setElement(a[f])&&this.positions.push(b));return this.positions.length>0?(this.enabled=!0,this.positions.length>e?!0:!1):!1},adr.ScrollPositional.prototype.addElements=adr.ScrollPositional.prototype.addElement,adr.ScrollPositional.prototype.findPositionByElement=function(a){var b=__imns("util.validation"),c=__imns("util.tools");if(void 0!==a&&b.isHTMLElement(a)&&c.inVisibleDOM(a))for(var d=0,e=this.positions.length;e>d;d+=1)if(this.positions[d].element===a)return this.positions[d];return-1},adr.ScrollPositional.prototype.findPositionById=function(a){if(void 0!==a&&"string"==typeof a&&a.length>0)for(var b=0,c=this.positions.length;c>b;b+=1)if(this.positions[b].id===a)return this.positions[b];return-1},adr.ScrollPositional.prototype.findPositionByIndex=function(a){var b=__imns("component.classes");return a=Number(a),!isNaN(a)&&a>-1&&parseInt(a)===a&&a<this.positions.length&&this.positions[a]instanceof b.ScrollPosition?this.positions[a]:-1},adr.ScrollPositional.prototype.findPositional=function(a){var b=__imns("component.classes"),c=__imns("util.validation");if(a instanceof b.ScrollPosition){for(var d=!1,e=0,f=this.positions.length;f>e;e+=1)if(a===this.positions[e]){a=this.positions[e],d=!0;break}if(!d)return-1}else{var g=a;if(a=void 0!==g&&c.isHTMLElement(g)?this.findPositionByElement(g):-1,a=-1===a?this.findPositionByIndex(g):a,a=-1===a?this.findPositionById(g):a,-1===a)return-1}return a instanceof b.ScrollPosition?a:-1},adr.ScrollPositional.prototype.whichIndex=function(){for(var a,b=__imns("util.classes"),c=__imns("util.tools"),d=__imns("util.validation"),e=((new b.ScreenProperties).offsetY(),-1),f=0,g=this.positions.length;g>f;f+=1)if(a=this.positions[f],void 0!==a.element&&d.isHTMLElement(a.element)&&c.inVisibleDOM(a.element)){var h=new b.BoundaryCoordinates(a.element);if(h.isOver((new b.ScreenProperties).offsetX(),(new b.ScreenProperties).offsetY()))return f}return e},adr.ScrollPositional.prototype.whichPosition=function(){var a=this.whichIndex();return-1!==a?this.positions[a]:-1},adr.ScrollPositional.prototype.whichId=function(){var a=this.whichIndex();return-1!==a&&""!==this.positions[a].id?this.positions[a].id:""},adr.ScrollPositional.prototype.whichElement=function(){var a=this.whichIndex();return-1!==a?this.positions[a].element:null},adr.ScrollPositional.prototype.goto=function(a){var b=__imns("util.classes");if(this.enabled&&this.isFunctional()){a=this.findPositional(a);var c=this.whichPosition();if(a!==c&&-1!==a){var d=new b.Coordinates(a.coordinates.getX1(),a.coordinates.getY1());return this.master.animateTo(d,this.axis)}}return!1});