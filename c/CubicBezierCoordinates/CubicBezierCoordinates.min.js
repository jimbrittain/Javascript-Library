"use strict";function CubicBezierCoordinates(){this.p0=null,this.p1=null,this.cp0=null,this.cp1=null,this.initialised=!1,this.iterations=10,this.len=100,this.arc_lengths=[],this.arc_ys=[],this.arc_xs=[],this.length=null}CubicBezierCoordinates.prototype.reset=function(){return this.arcs_ys=[],this.arcs_xs=[],this.arc_lengths=[],this.length=null,this.initialised=!1,!0},CubicBezierCoordinates.prototype.determine_arc_ys=function(){this.arc_ys=[],this.arc_ys[0]=0;for(var a=1,b=this.len;b>a;a+=1)this.arc_ys[a]=this.calculateYPosition(a/this.len)},CubicBezierCoordinates.prototype.determine_arc_xs=function(){this.arc_xs=[],this.arc_xs[0]=0;for(var a=1,b=this.len;b>a;a+=1)this.arc_xs[a]=this.calculateXPosition(a/this.len)},CubicBezierCoordinates.prototype.determine_lengths=function(){var a=this.calculateXPosition(0),b=this.calculateYPosition(0),c=0;this.arc_lengths=[],this.arc_lengths[0]=0;for(var d=1,e=this.len+1;e>d;d+=1){var f=this.calculateXPosition(d/this.len),g=this.calculateYPosition(d/this.len),h=a-f,i=b-g;c+=Math.sqrt(Math.pow(h,2)+Math.pow(i,2)),this.arc_lengths[d]=c,a=f,b=g}this.length=c},CubicBezierCoordinates.prototype.cssSet=function(){this.setPoint0(0,0),this.setPoint1(1,1);var a=1===arguments.length&&"string"==typeof arguments[0]?this.stringStrip(arguments[0]):this.arguments;return 2===a.length&&a[0]instanceof Coordinates&&a[1]instanceof Coordinates?(this.setControlPoint0(a[0]),this.setControlPoint1(a[1]),!0):4===arguments.length?(this.setControlPoint0(a[0],a[1]),this.setControlPoint1(a[2],a[3]),!0):!1},CubicBezierCoordinates.prototype.setPoint0=function(){this.p0=void 0!==arguments[0]&&arguments[0]instanceof Coordinates?arguments[0]:new Coordinates(arguments[0],void 0!==arguments[1]?arguments[1]:void 0),this.initialised&&this.reset()},CubicBezierCoordinates.prototype.setPoint1=function(){this.p1=void 0!==arguments[0]&&arguments[0]instanceof Coordinates?arguments[0]:new Coordinates(arguments[0],void 0!==arguments[1]?arguments[1]:void 0),this.initialised&&this.reset()},CubicBezierCoordinates.prototype.setControlPoint0=function(){this.cp0=void 0!==arguments[0]&&arguments[0]instanceof Coordinates?arguments[0]:new Coordinates(arguments[0],void 0!==arguments[1]?arguments[1]:void 0),this.initialised&&this.reset()},CubicBezierCoordinates.prototype.setControlPoint1=function(){this.cp1=void 0!==arguments[0]&&arguments[0]instanceof Coordinates?arguments[0]:new Coordinates(arguments[0],void 0!==arguments[1]?arguments[1]:void 0),this.initialised&&this.reset()},CubicBezierCoordinates.prototype.stringStrip=function(a){if("string"==typeof a){a=0===a.indexOf("cubic-bezier(")?a.substring(13):a,a=0===a.indexOf("(")?a.substring(1):a,a=a.lastIndexOf(")")===a.length-1?a.substring(0,a.length-1):a;var b=a.split(",");if(4===b.length){for(var c=0,d=b.length;d>c;c+=1)b[c]=isNumber(b[c])?b[c]:0;return[new Coordinates(b[0],b[1]),new Coordinates(b[2],b[3])]}return[]}return[]},CubicBezierCoordinates.prototype.map=function(a){for(var b=a*this.arc_lengths[this.len],c=0,d=this.len,e=0;d>c;)e=c+((d-c)/2|0),this.arc_lengths[e]<b?c=e+1:d=e;this.arc_lengths[e]>b&&(e-=1);var f=this.arc_lengths[e];return f===b?e/this.len:(e+b/(this.arc_lengths[e+1]-f))/this.len},CubicBezierCoordinates.prototype.map_lengthsX=function(a){return this.calculateXPosition(this.map(a))},CubicBezierCoordinates.prototype.map_lengthsY=function(a){return this.calculateYPosition(this.map(a))},CubicBezierCoordinates.prototype.map_arcs=function(a,b){var c=0,d=0;b=void 0!==b&&b?!1:!0;var e=void 0!==b&&b?this.arc_ys:this.arc_xs;0===e.length&&(b?(this.determine_arc_ys(),e=this.arc_ys):(this.determine_arc_xs(),e=this.arc_xs));var f=a,g=0,h=e.length,i=0,j=e.length;for(c=0,d=e.length;d>c;c+=1){var k=e[c];if(!(k>g&&f>k)){for(;f>=h;)j+=1,h=e[j];break}g=k,h=e[c+1],i=c,j=c+c}for(a=0;a<this.iterations;){var l=(j-i)/2,m=b?this.calculateYPosition((i+l)/this.len):this.calculateXPosition((i+l)/this.len);if(m>g&&f>m)g=m,i+=l;else if(m>f&&h>m)h=m,j=i+l;else if(m===f){j=i+l,i=j+l;break}a+=1}return(j+i)/2/100},CubicBezierCoordinates.prototype.map_arcsY=function(a){return this.map_arcs(a,!0)},CubicBezierCoordinates.prototype.map_arcsX=function(a){return this.map_arcs(a,!0)},CubicBezierCoordinates.prototype.findYPositionFromX=function(a){return this.calculateYPosition(this.map_arcsX(a))},CubicBezierCoordinates.prototype.findXPositionFromY=function(a){return this.calculateXPosition(this.map_arcsY(a))},CubicBezierCoordinates.prototype.calculateXPosition=function(a){var b=(1-a)*this.p0.x+a*this.cp0.x,c=(1-a)*this.cp0.x+a*this.cp1.x,d=(1-a)*this.cp1.x+a*this.p1.x,e=(1-a)*b+a*c,f=(1-a)*c+a*d;return(1-a)*e+a*f},CubicBezierCoordinates.prototype.calculateYPosition=function(a){var b=(1-a)*this.p0.y+a*this.cp0.y,c=(1-a)*this.cp0.y+a*this.cp1.y,d=(1-a)*this.cp1.y+a*this.p1.y,e=(1-a)*b+a*c,f=(1-a)*c+a*d;return(1-a)*e+a*f},CubicBezierCoordinates.prototype.calculatePositionFromT=function(a){return new Coordinates(this.calculateXPosition(a),this.calculateYPosition(a))};