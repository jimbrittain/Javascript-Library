"use strict";function SrcSetter(){if(void 0!==SrcSetter.prototype.singleton)return SrcSetter.prototype.singleton;SrcSetter.prototype.singleton=this,this.supportsSrcset=-1,this.dppx=-1,this.processed=[];var a=this;fetter(window,"load",function(){a.processAll()},!0,"both")}SrcSetter.prototype.returnPixelRatio=function(){if(-1!==this.dppx)return this.dppx;if("devicePixelRatio"in window)return this.dppx=Math.floor(window.devicePixelRatio),this.dppx;if("matchMedia"in window){var a="";if(a="(-webkit-min-device-pixel-ratio: 3), (min--moz-device-pixel-ratio:3), (min-device-pixel-ratio:3), (min-resolution: 3dppx), (min-resolution:288dpi)",window.matchMedia(a).matches)return this.dppx=3,this.dppx;if(a="(-webkit-min-device-pixel-ratio: 2), (min--moz-device-pixel-ratio:2), (min-device-pixel-ratio:2), (min-resolution: 2dppx), (min-resolution:192dpi)",window.matchMedia(a).matches)return this.dppx=2,this.dppx}return this.dppx=1,1},SrcSetter.prototype.isSrcsetSupported=function(){if(-1!==this.supportsSrcset)return this.supportsSrcset;var a=new Image;return"hasOwnProperty"in a?(this.supportsSrcset=a.hasOwnProperty("srcset")?!0:!1,this.supportsSrcset):(this.supportsSrcset="srcset"in a?!0:!1,this.supportsSrcset)},SrcSetter.prototype.beenProcessed=function(a){for(var b=0,c=this.processed.length;c>b;b+=1)if(a===this.processed[b])return!0;return!1},SrcSetter.prototype.processAll=function(){if(this.isSrcsetSupported())return!1;for(var a=findElementsByTag("img"),b=0,c=a.length;c>b;b+=1)this.processImage(a[b]);return!0},SrcSetter.prototype.processImage=function(a){if(!this.isSrcsetSupported()&&(a.hasAttribute("srcset")||"srcset"in a)&&!this.beenProcessed(a)){var b=this.getSrcFromSrcSet(a);if(this.processed.push(a),""!==b)return"currentSrc"in a&&a.currentSrc!==b?(a.currentSrc=b,!0):"src"in a&&a.src!==b?(a.src=b,!0):!0}},SrcSetter.prototype.getSrcFromSrcSet=function(a){var b,c,d,e=this.getImageSrcSet(a),f=this.returnPixelRatio();for(b=f,d=0;b>d;b-=1)if(void 0!==e[b])return e[b];for(b=f,c=e.length;c>b;b+=1)if(void 0!==e[b])return e[b];return""},SrcSetter.prototype.getImageSrcSet=function(a){for(var b,c=[],d=getAttributer(a,"src"),e=getAttributer(a,"srcset"),f="string"==typeof e?e.split(","):[],g=/\s*([A-Za-z0-9\:\.\/\-\_]+)\s*([0-9])x\s*/,h=0,i=f.length;i>h;h+=1)"string"==typeof f[h]&&g.test(f[h])&&(b=f[h].match(g),void 0!==b[1]&&void 0!==b[2]&&(c[Number(b[2])]=b[1]));return void 0===c[1]&&"string"==typeof d&&(c[1]=d),c};