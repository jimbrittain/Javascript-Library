"use strict";var adr=__imns("component.classes");"ImperfectRow"in adr||(adr.ImperfectRow=function(){var a=__imns("component.classes");return void 0!==a.ImperfectRow.prototype.singleton?(arguments&&arguments.length&&a.ImperfectRow.prototype.singleton.build(arguments),a.ImperfectRow.prototype.singleton):(a.ImperfectRow.prototype.singleton=this,this.rows=[],this.fixOnResize=!0,this.build(arguments),void(this.fixOnResize&&this.setResize(this.fixOnResize)))},adr.ImperfectRow.prototype.build=function(a){for(var b=__imns("util.validation"),c=__imns("component.classes"),d=null;b.isArguments(a)&&1===a.length;)a=a[0];return 2===a.length?d=new c.ImperfectRowObject({element:a[0],boxIdentifier:a[1]}):"object"==typeof a&&"element"in a&&(d=new c.ImperfectRowObject(a)),d instanceof c.ImperfectRowObject&&d.isValid()&&!this.elementExists(d.element)?(this.rows.push(d),this.rows[this.rows.length-1].fix(),!0):!1},adr.ImperfectRow.prototype.findRowIdFromElement=function(a){var b=__imns("util.validation");if(void 0!==a&&b.isHTMLElement(a)){for(var c=!1,d=0,e=this.rows.length;e>d;d+=1)if(a===this.rows[d].element){c=d;break}return c}return!1},adr.ImperfectRow.prototype.findRowFromElement=function(a){var b=this.findRowIdFromElement(a);return b!==!1?this.rows[b]:void 0},adr.ImperfectRow.prototype.elementExists=function(a){return this.findRowIdFromElement(a)===!1?!1:!0},adr.ImperfectRow.prototype.addRow=function(a){var b=__imns("component.classes");return a instanceof b.ImperfectRowObject?this.elementExists(a.element)?this.rows[this.findRowIdFromElement(a.element)]:(this.rows.push(a),this.rows[this.rows.length-1].fix(),this.rows[this.rows.length-1]):void 0},adr.ImperfectRow.prototype.deleteRowFromElement=function(a){var b=__imns("util.validation"),c=-1;return void 0!==a&&b.isHTMLElement(a)&&this.elementExists(a)?(c=this.findRowIdFromElement(a),this.deleteRowFromId(c)):!1},adr.ImperfectRow.prototype.deleteRowFromId=function(a){var b=__imns("util.validation");return a=b.isNumber(a)?Math.round(a):a,b.isNumber(a)&&a>-1&&a<this.rows.length?(this.rows.splice(a,1),!0):!1},adr.ImperfectRow.prototype.deleteRedundantRows=function(){for(var a=__imns("util.validation"),b=__imns("util.dom"),c=this.rows.length-1,d=!1;c>-1;)void 0!==this.rows[c].element&&a.isHTMLElement(this.rows[c].element)&&b.inVisibleDOM(this.rows[c].element)||(d=this.deleteRowFromId(c)),c-=1;return this.rows.length},adr.ImperfectRow.prototype.setResize=function(a){var b=__imns("util.tools"),c=void 0!==a&&a===!1?!1:!0,d=this;c&&(this.fixOnResize=c,b.fetter(window,"resize",[d,function(){__imns("util.tools").debounce(function(){d.resize()},500)}],!0,"both"))},adr.ImperfectRow.prototype.resize=function(){var a=__imns("util.validation"),b=this,c=0;if(this.fixOnResize&&void 0!==this.rows&&this.rows.length>0){for(c=this.rows.length-1;c>-1;)void 0!==this.rows[c].element&&a.isHTMLElement(this.rows[c].element)?this.rows[c].resize===!0&&b.rows[c].fix():this.deleteRowFromId(c),c-=1;return!0}return!1},adr.ImperfectRowObject=function(a){this.active=!0,this.resize=!0,this.element="",this.boxIdentifier="*",this.margin="right",this.valid=!1,void 0!==a&&this.init(a)},adr.ImperfectRowObject.prototype.init=function(a){"object"==typeof a&&("element"in a&&this.setElement(a.element),"boxIdentifier"in a&&this.setBoxIdentifier(a.boxIdentifier),"margin"in a&&this.setMargin(a.margin))},adr.ImperfectRowObject.prototype.isValid=function(){var a=__imns("util.validation");return null!==this.element&&""!==this.boxIdentifier&&a.isHTMLElement(this.element)&&this.childArray().length>0?!0:!1},adr.ImperfectRowObject.prototype.setActive=function(a){var b=__imns("util.validation");return this.active=b.isBoolean(a)?a:!0,this.active},adr.ImperfectRowObject.prototype.setElement=function(a){var b=__imns("util.validation"),c=__imns("util.dom");if(b.isHTMLElement(a))return this.element=a,!0;if(b.isString(a)){var d=c.findElementsBySelector(a);return this.element=1===d.length?d[0]:null,1===d.length?!0:!1}return!1},adr.ImperfectRowObject.prototype.setMargin=function(a){var b=__imns("util.validation");if(b.isString(a))switch(a){case"left":case"l":return this.margin="left",!0;default:return this.margin="right",!0}return!1},adr.ImperfectRowObject.prototype.getMargin=function(){return"margin-"+this.margin},adr.ImperfectRowObject.prototype.setBoxIdentifier=function(a){var b=__imns("util.dom"),c=__imns("util.validation");return c.isString(a)?(this.boxIdentifier=b.findElementsBySelector(this.element,a).length>0?a:"*",a===this.boxIdentifier):!1},adr.ImperfectRowObject.prototype.fix=function(){console.log("here");var a=__imns("util.dom");if(this.active){var b=this.childArray(),c=0,d=[],e=0,f=0;for(e=0,f=b.length;f>e;e+=1)b[e].style[this.getMargin()]="0px";for(d=this.childArrayVisible(),e=0,f=d.length;f>e;e+=1)c+=parseFloat(a.findElementStyle(d[e],"offsetWidth"));var g=this.getContainerWidth()-c;for(g/=d.length-1,g=Math.floor(g),e=0,f=b.length;f>e;e+=1){var h=b[e];h.style[this.getMargin()]=g+"px"}return!0}return!1},adr.ImperfectRowObject.prototype.getContainerWidth=function(){var a=__imns("util.dom");return parseFloat(a.findElementStyle(this.element,"innerWidth"))},adr.ImperfectRowObject.prototype.childArray=function(){var a=__imns("util.dom");return a.findElementsBySelector(this.element,this.boxIdentifier)},adr.ImperfectRowObject.prototype.childArrayVisible=function(){for(var a=(__imns("util.dom"),__imns("util.classes")),b=this.childArray(),c=new a.BoundaryCoordinates(b[0]),d=parseInt(c.y2),e=[],f=new a.BoundaryCoordinates(this.element),g=0,h=b.length;h>g;g+=1){var i=new a.BoundaryCoordinates(b[g]);parseInt(i.y1)<d&&f.isOver(i)&&e.push(b[g])}return e});