"use strict";var adr=__imns("util.classes");"HistoricKeyStrokes"in adr||(adr.HistoricKeyStrokes=function(){var a=__imns("util.classes");return void 0!==a.HistoricKeyStrokes.prototype.singleton?a.HistoricKeyStrokes.prototype.singleton:(a.HistoricKeyStrokes.prototype.singleton=this,this.pauseto=null,this.pausetime=800,this.endto=null,this.endtime=250,this.keys=[],this.endEvent=null,void this.init())},adr.HistoricKeyStrokes.prototype.init=function(){var a=__imns("util.tools");this.endEvent=a.createEvent("keypresssequence",this.keys);var b=this;a.fetter(document,"DOMContentLoaded",[this,function(){b.buildListener()}],!0,"after")},adr.HistoricKeyStrokes.prototype.buildListener=function(){var a=__imns("util.tools"),b=this;a.fetter(document,"keypress",[this,function(a){b.add(a)}],!0)},adr.HistoricKeyStrokes.prototype.clearpause=function(){null!==this.pauseto&&(clearTimeout(this.pauseto),this.pauseto=null),null!==this.endto&&(this.keys=[],this.clearend())},adr.HistoricKeyStrokes.prototype.clearend=function(){null!==this.endto&&(clearTimeout(this.endto),this.endto=null)},adr.HistoricKeyStrokes.prototype.add=function(a){var b=__imns("util.classes"),c=this,d=new b.KeyStroke(a);this.clearpause(),this.keys.push(d),this.pauseto=setTimeout(function(){c.pause()},this.pausetime)},adr.HistoricKeyStrokes.prototype.pause=function(){var a=this;this.clearpause(),this.endto=setTimeout(function(){a.end()},this.endtime)},adr.HistoricKeyStrokes.prototype.end=function(){var a=__imns("util.tools"),b=this.keys;this.endEvent.addData({keys:b}),a.fireElementEvent(document,"keypresssequence"),this.keys=[],this.clearend()},adr.HistoricKeyStrokes.prototype.ask=function(){return __imns("util.tools").deepClone(this.keys)},__imns("util.tools").matchAgainstHistoricKeyStrokes=function(a,b){var c=__imns("util.validation"),d=__imns("util.classes"),e=function(a){var b=[];return c.isString(a)||c.isNumber(a)?b.push(a):"object"==typeof a&&("key"in a&&b.push(a.key),"keyCode"in a&&b.push(a.keyCode),"keyIdentifier"in a&&b.push(a.keyIdentifier),"code"in a&&b.push(a.code),"charCode"in a&&b.push(a.charCode)),b};if((c.isString(a)||c.isNumber(a))&&(a=String(a),a=a.split("")),b=b instanceof d.KeyStroke?[b]:b,c.isArray(a)&&c.isArray(b)&&a.length===b.length){for(var f,g,h=!0,i=!1,j=0,k=a.length;k>j;j+=1){f=e(a[j]),g=e(b[j]),i=!1;for(var l=0,m=f.length;m>l;l+=1)if(c.isInArray(g,f[l])){i=!0;break}if(!i){h=!1;break}}return h}return!1},adr.KeyStroke=function(a){this.key="",this.keyCode="",this.keyIdentifier="",this.code="",this.charCode="",null!==a&&this.init(a)},adr.KeyStroke.prototype.init=function(a){this.key="key"in a?a.key:this.key,this.keyCode="keyCode"in a?a.keyCode:this.keyCode,this.keyIdentifier="keyIdentifier"in a?a.keyIdentifier:this.keyIdentifier,this.code="code"in a?a.code:this.code,this.charCode="charCode"in a?a.charCode:this.charCode});