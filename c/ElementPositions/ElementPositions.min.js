"use strict";function ElementPositions(){return void 0!==ElementPositions.prototype.singleton?ElementPositions.prototype.singleton:(ElementPositions.prototype.singleton=this,this.elem_names=[],this.coords=[],void(this.default_coords=[]))}ElementPositions.prototype.add=function(a){var b=!1;if(-1===this.findId(a)){if("string"==typeof a)this.elem_names.push(a),this.default_coords.push(new Coordinates(0,0)),b=!0;else if(void 0!==a&&isHTMLElement(a)){var c=getAttributer(a,"id");""!==c&&(this.elem_names.push(c),this.default_coords.push(new Coordinates(0,0)),b=!0)}return b}return!1},ElementPositions.prototype.addElement=ElementPositions.prototype.add,ElementPositions.prototype.findId=function(a){var b=-1,c=0,d=0;if("string"==typeof a){for(c=0,d=this.elem_names.length;d>c;c+=1)if(a===this.elem_names[c]){b=c;break}}else if(void 0!==a&&isHTMLElement(a)){for(c=0,d=this.elem_names.length;d>c;c+=1)if(a===findElementByID(this.elem_names[c])){b=c;break}}else"number"==typeof a&&Math.round(a)===a&&a>-1&&(b=a<this.elem_names.length&&void 0!==this.elem_names[a]?a:-1);return b},ElementPositions.prototype.remove=function(a){var b=this.findId(a);return-1!==b?(this.elem_names.splice(b,1),this.coords.splice(b,1),this.default_coords.splice(b,1),!0):void 0},ElementPositions.prototype.setDefaultCoordinates=function(a,b){var c=this.findId(a);return-1!==c&&void 0!==b?(b=b instanceof Coordinates?b:new Coordinates(b),this.default_coords[c]=b,!0):!1},ElementPositions.prototype.establish=function(a){var b,c;if(void 0===a){for(var d=0,e=this.elem_names.length;e>d;d+=1)b=void 0!==this.coords[d]?this.coords[d]:this.default_coords[d],b=b instanceof Coordinates?b:new Coordinates(0,0),this.setPosition(this.elem_names[d],b);return!0}return c=this.findId(a),-1!==c?(b=void 0!==this.coords[c]?this.coords[c]:this.default_coords[c],b=b instanceof Coordinates?b:new Coordinates(0,0),this.setPosition(a,b),!0):!1},ElementPositions.prototype.reset=function(a,b){b=void 0!==b&&b?!0:!1;var c,d,e,f,g;if(void 0===a){for(d=0,e=this.elem_names.length;e>d;d+=1)f=findElementByID(this.elem_names[d]),void 0!==f&&isHTMLElement(f)&&(c=void 0!==this.default_coords[d]&&this.default_coords[d]instanceof Coordinates?this.default_coords[d]:new Coordinates(0,0),this.setPosition(this.elem_names[d],c));return b&&this.clear(),!0}return g=this.findId(a),-1!==g?(c=void 0!==this.default_coords[g]&&this.default_coords[g]instanceof Coordinates?this.default_coords[g]:new Coordinates(0,0),this.setPosition(a,c),b&&this.clear(a),!0):void 0},ElementPositions.prototype.resetWithClear=function(a){this.reset(a,!0)},ElementPositions.prototype.clear=function(a){if(void 0===a){for(var b=0,c=this.elem_names.length;c>b;b+=1)this.clearIndividual(this.elem_names[b]);return!0}return-1!==this.findId(a)?this.clearIndividual(a):!1},ElementPositions.prototype.clearIndividual=function(a){var b,c=this.findId(a);return-1!==c&&(b=findElementByID(this.elem_names[c]),void 0!==b&&isHTMLElement(b))?(b.style.left="",b.style.top="",!0):!1},ElementPositions.prototype.setPosition=function(a,b,c){c=void 0===c||c?!0:!1,b=b instanceof Coordinates?b:new Coordinates(b);var d=this.findId(a),e=-1!==d?findElementByID(this.elem_names[d]):void 0;return void 0!==e&&isHTMLElement(e)?(e.style.left=b.x,e.style.top=b.y,this.getPosition(a),this.remember(),!0):!1},ElementPositions.prototype.getPosition=function(a){var b,c;if(void 0===a){for(var d=0,e=this.elem_names.length;e>d;d+=1)b=this.getCurrentCoordinates(this.elem_names[d]),b instanceof Coordinates&&(this.coords[d]=b);return!0}return b=this.getCurrentCoordinates(a),b instanceof Coordinates?(c=this.findId(a),this.coords[c]=b,!0):!1},ElementPositions.prototype.getCurrentCoordinates=function(a){var b=this.findId(a),c=-1!==b?findElementByID(this.elem_names[b]):void 0;return void 0!==c&&isHTMLElement(c)?new Coordinates(parseInt(findElementStyle(c,"left")),parseInt(findElementStyle(c,"top"))):null},ElementPositions.prototype.recall=function(a){a=void 0===a||a?!0:!1;var b,c,d,e=new CookieInterface,f=[];if(e.hasItem("positions")){b=e.findItem("positions").value.split(";");for(var g=0,h=b.length;h>g;g+=1)c=b[g].split(":"),2===c.length&&!isNaN(Number(c[0]))&&!isNaN(Number(c[1]))&&c[0]>=0&&c[1]>=0?(d=new Coordinates(c[0],c[1]),f.push(d)):f.push(new Coordinates(0,0));for(var i=0,j=f.length;j>i;i+=1)this.setPosition(i,f[i],a)}return!1},ElementPositions.prototype.recallWithSet=function(){this.recall(!0)},ElementPositions.prototype.remember=function(){for(var a="",b=new CookieInterface,c=0,d=this.coords.length;d>c;c+=1)a+=this.coords[c].x+":"+this.coords[c].y+";";a=d>0?a.substr(0,a.length-1):a,b.setItem(new CookieObject({name:"positions",value:a,expires:(new Date).getTime()+2419200}))};