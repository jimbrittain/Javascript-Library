"use strict";var adr=__imns("component.classes");"ElementPositions"in adr||(adr.ElementPositions=function(){var a=__imns("component.classes");return void 0!==a.ElementPositions.prototype.singleton?a.ElementPositions.prototype.singleton:(a.ElementPositions.prototype.singleton=this,this.elem_names=[],this.coords=[],void(this.default_coords=[]))},adr.ElementPositions.prototype.add=function(a){var b=__imns("util.classes"),c=__imns("util.tools"),d=__imns("util.validation"),e=!1;if(-1===this.findId(a)){if("string"==typeof a)this.elem_names.push(a),this.default_coords.push(new b.Coordinates(0,0)),e=!0;else if(void 0!==a&&d.isHTMLElement(a)){var f=c.getAttribute(a,"id");""!==f&&(this.elem_names.push(f),this.default_coords.push(new b.Coordinates(0,0)),e=!0)}return e}return!1},adr.ElementPositions.prototype.addElement=adr.ElementPositions.prototype.add,adr.ElementPositions.prototype.findId=function(a){var b=__imns("util.validation"),c=__imns("util.dom"),d=-1,e=0,f=0;if("string"==typeof a){for(e=0,f=this.elem_names.length;f>e;e+=1)if(a===this.elem_names[e]){d=e;break}}else if(void 0!==a&&b.isHTMLElement(a)){for(e=0,f=this.elem_names.length;f>e;e+=1)if(a===c.findElementByID(this.elem_names[e])){d=e;break}}else"number"==typeof a&&Math.round(a)===a&&a>-1&&(d=a<this.elem_names.length&&void 0!==this.elem_names[a]?a:-1);return d},adr.ElementPositions.prototype.remove=function(a){var b=this.findId(a);return-1!==b?(this.elem_names.splice(b,1),this.coords.splice(b,1),this.default_coords.splice(b,1),!0):void 0},adr.ElementPositions.prototype.setDefaultCoordinates=function(a,b){var c=__imns("util.classes"),d=this.findId(a);return-1!==d&&void 0!==b?(b=b instanceof c.Coordinates?b:new c.Coordinates(b),this.default_coords[d]=b,!0):!1},adr.ElementPositions.prototype.establish=function(a){var b,c,d=__imns("util.classes");if(void 0===a){for(var e=0,f=this.elem_names.length;f>e;e+=1)b=void 0!==this.coords[e]?this.coords[e]:this.default_coords[e],b=b instanceof d.Coordinates?b:new d.Coordinates(0,0),this.setPosition(this.elem_names[e],b);return!0}return c=this.findId(a),-1!==c?(b=void 0!==this.coords[c]?this.coords[c]:this.default_coords[c],b=b instanceof d.Coordinates?b:new d.Coordinates(0,0),this.setPosition(a,b),!0):!1},adr.ElementPositions.prototype.reset=function(a,b){var c=__imns("util.dom"),d=__imns("util.classes"),e=__imns("util.validation");b=void 0!==b&&b?!0:!1;var f,g,h,i,j;if(void 0===a){for(g=0,h=this.elem_names.length;h>g;g+=1)i=c.findElementByID(this.elem_names[g]),void 0!==i&&e.isHTMLElement(i)&&(f=void 0!==this.default_coords[g]&&this.default_coords[g]instanceof d.Coordinates?this.default_coords[g]:new d.Coordinates(0,0),this.setPosition(this.elem_names[g],f));return b&&this.clear(),!0}return j=this.findId(a),-1!==j?(f=void 0!==this.default_coords[j]&&this.default_coords[j]instanceof d.Coordinates?this.default_coords[j]:new d.Coordinates(0,0),this.setPosition(a,f),b&&this.clear(a),!0):void 0},adr.ElementPositions.prototype.resetWithClear=function(a){this.reset(a,!0)},adr.ElementPositions.prototype.clear=function(a){if(void 0===a){for(var b=0,c=this.elem_names.length;c>b;b+=1)this.clearIndividual(this.elem_names[b]);return!0}return-1!==this.findId(a)?this.clearIndividual(a):!1},adr.ElementPositions.prototype.clearIndividual=function(a){var b,c=__imns("util.dom"),d=__imns("util.validation"),e=this.findId(a);return-1!==e&&(b=c.findElementByID(this.elem_names[e]),void 0!==b&&d.isHTMLElement(b))?(b.style.left="",b.style.top="",!0):!1},adr.ElementPositions.prototype.setPosition=function(a,b,c){var d=__imns("util.classes"),e=__imns("util.validation"),f=__imns("util.dom");c=void 0===c||c?!0:!1,b=b instanceof d.Coordinates?b:new d.Coordinates(b);var g=this.findId(a),h=-1!==g?f.findElementByID(this.elem_names[g]):void 0;return void 0!==h&&e.isHTMLElement(h)?(h.style.left=b.x,h.style.top=b.y,this.getPosition(a),this.remember(),!0):!1},adr.ElementPositions.prototype.getPosition=function(a){var b,c,d=__imns("util.classes");if(void 0===a){for(var e=0,f=this.elem_names.length;f>e;e+=1)b=this.getCurrentCoordinates(this.elem_names[e]),b instanceof d.Coordinates&&(this.coords[e]=b);return!0}return b=this.getCurrentCoordinates(a),b instanceof d.Coordinates?(c=this.findId(a),this.coords[c]=b,!0):!1},adr.ElementPositions.prototype.getCurrentCoordinates=function(a){var b=__imns("util.validation"),c=__imns("util.classes"),d=__imns("util.dom"),e=this.findId(a),f=-1!==e?d.findElementByID(this.elem_names[e]):void 0;return void 0!==f&&b.isHTMLElement(f)?new c.Coordinates(parseInt(d.findElementStyle(f,"left")),parseInt(d.findElementStyle(f,"top"))):null},adr.ElementPositions.prototype.recall=function(a){var b=__imns("util.classes");a=void 0===a||a?!0:!1;var c,d,e,f=new b.CookieInterface,g=[];if(f.hasItem("positions")){c=f.findItem("positions").value.split(";");for(var h=0,i=c.length;i>h;h+=1)d=c[h].split(":"),2===d.length&&!isNaN(Number(d[0]))&&!isNaN(Number(d[1]))&&d[0]>=0&&d[1]>=0?(e=new b.Coordinates(d[0],d[1]),g.push(e)):g.push(new b.Coordinates(0,0));for(var j=0,k=g.length;k>j;j+=1)this.setPosition(j,g[j],a)}return!1},adr.ElementPositions.prototype.recallWithSet=function(){this.recall(!0)},adr.ElementPositions.prototype.remember=function(){for(var a=__imns("util.classes"),b="",c=new a.CookieInterface,d=0,e=this.coords.length;e>d;d+=1)b+=this.coords[d].x+":"+this.coords[d].y+";";b=e>0?b.substr(0,b.length-1):b,c.setItem(new a.CookieObject({name:"positions",value:b,expires:(new Date).getTime()+2419200}))});