"use strict";function ScrollPositionMaster(){return void 0!==ScrollPositionMaster.prototype.singleton?ScrollPositionMaster.prototype.singleton:(ScrollPositionMaster.prototype.singleton=this,this.child_id=0,this.default_anim_props={duration:2e3,timingFunction:"ease-in-out"},this.anim=null,this.scrollCheckElement=null,this.possible=!1,this.justdone=!1,this.timeout_id=null,this.timeout_ms=5,this.init(),this)}function ScrollPosition(a){this.element=null,this.coordinates=null,this.id="",void 0!==a&&this.init(a)}function ScrollPositional(a){this.master=new ScrollPositionMaster,this.enabled=!1,this._functional=null,this.positions=[],this.axis="y",void 0!==a&&this.init(a)}ScrollPositionMaster.prototype.init=function(){this.createScrollHider()},ScrollPositionMaster.prototype.userCancelInit=function(){fetter(window,"scroll",function(){(new ScrollPositionMaster).userCancel()},!0)},ScrollPositionMaster.prototype.userCancelAbort=function(){unfetter(window,"scroll",function(){(new ScrollPositionMaster).userCancel()},!0)},ScrollPositionMaster.prototype.userCancel=function(){return!!this.justdone||void(this.anim.animating&&(this.anim.pause(),this.anim.clear(),this.userCancelAbort()))},ScrollPositionMaster.prototype.createScrollHider=function(){null===this.scrollCheckElement&&fetter(document,"DOMContentLoaded",function(){var a=null;"createElement"in document&&"appendChild"in document.body?(a=document.createElement("div"),setAttributer(a,"id","spm_scrollcheckelement"),setAttributer(a,"style","visibility:hidden !important;position:absolute;top:0;left:0;z-index:10000000;"),document.body.appendChild(a)):(a='<div id="spm_scrollcheckelement" style="visibility:hidden !important;position:absolute;top:0;left:0;z-index:10000000;"></div>',"body"in document&&"innerHTML"in document.body&&(document.body.innerHTML+=a),a=findElementByID("spm_scrollcheckelement")),(new ScrollPositionMaster).scrollCheckElement=void 0!==a&&isHTMLElement(a)?a:null,(new ScrollPositionMaster).possible=null!==(new ScrollPositionMaster).scrollCheckElement},!0,"after")},ScrollPositionMaster.prototype.animateTo=function(a,b){return null!==this.anim&&(this.anim.pause(),this.anim.clear()),this.anim=new Animation(this.default_anim_props),this.anim.element=this.scrollCheckElement,this.anim.element.style.top=(new ScreenProperties).offsetY()+"px",this.anim.element.style.left=(new ScreenProperties).offsetX()+"px",this.anim.forceJSAnimation=!0,this.userCancelAbort(),this.userCancelInit(),this.anim.addEndFunction(function(){(new ScrollPositionMaster).userCancelAbort()}),a instanceof Coordinates||isNaN(Number(a))||(a=new Coordinates(a,a)),b="x"===b||"y"===b||"both"===b?b:"y","y"!==b&&"both"!==b||this.anim.addProperty({name:"custom_scroll_y",start:(new ScreenProperties).offsetY(),end:a.y,custom:{get:function(a){var b=(new ScrollPositionMaster).scrollCheckElement;return findElementStyle(b,"top")},set:function(a,b){var c=new ScrollPositionMaster,d=c.scrollCheckElement;d.style.top=b,c.justdone=!0,window.scroll(Math.round(parseFloat(findElementStyle(d,"left"))),Math.round(parseFloat(b))),null!==c.timeout_id&&(clearTimeout(c.timeout_id),c.timeout_id=null),c.timeout_id=setTimeout(function(){(new ScrollPositionMaster).justdone=!1,c.timeout_id=null},c.timeout_ms)}}}),"x"!==b&&"both"!==b||this.anim.addProperty({name:"custom_scroll_x",start:(new ScreenProperties).offsetX(),end:a.x,custom:{get:function(a){var b=(new ScrollPositionMaster).scrollCheckElement;return findElementStyle(b,"left")},set:function(a,b){var c=new ScrollPositionMaster;c.scrollCheckElement.style.left=b;var d=c.scrollCheckElement;c.justdone=!0,window.scroll(parseInt(b),parseInt(findElementStyle(d,"top"))),null!==c.timeout_id&&(clearTimeout(c.timeout_id),c.timeout_id=null),c.timeout_id=setTimeout(function(){(new ScrollPositionMaster).justdone=!1,c.timeout_id=null},c.timeout_ms)}}}),this.anim.run(),!0},ScrollPositionMaster.prototype.scrollToElement=function(a,b){if(void 0!==a&&isHTMLElement(a)){var c=new ScrollPositional({elements:a});void 0!==b&&c.setAxis(b),c.goto(a)}},ScrollPosition.prototype.init=function(a){this.setElement(a)},ScrollPosition.prototype.setElement=function(a){return!(void 0===a||!isHTMLElement(a)||!inVisibleDOM(a))&&(this.element=a,this.coordinates=new BoundaryCoordinates(this.element),this.id=getAttributer(this.element,"id"),!0)},ScrollPositional.prototype.init=function(a){"elements"in a&&this.addElements(a.elements),"functional"in a&&this.setFunctional(a.functional)},ScrollPositional.prototype.isFunctional=function(){return null===this._functional||"function"!=typeof this._functional||this._functional()},ScrollPositional.prototype.setFunctional=function(a){return void 0!==a&&"function"==typeof a&&(this._functional=a,!0)},ScrollPositional.prototype.setAxis=function(a){if("string"==typeof a)switch(a=a.toLowerCase()){case"x":case"horizontal":this.axis="x";break;case"both":this.axis="both";break;case"y":case"vertical":default:this.axis="y"}else this.axis="y";return this.axis},ScrollPositional.prototype.addElement=function(a){var b,c=this.positions.length;a=isArray(a)?a:[a];for(var d=0,e=a.length;d<e;d+=1)void 0!==a[d]&&isHTMLElement(a[d])&&(b=new ScrollPosition,b.setElement(a[d])&&this.positions.push(b));return this.positions.length>0&&(this.enabled=!0,this.positions.length>c)},ScrollPositional.prototype.addElements=ScrollPositional.prototype.addElement,ScrollPositional.prototype.findPositionByElement=function(a){if(void 0!==a&&isHTMLElement(a)&&inVisibleDOM(a))for(var b=0,c=this.positions.length;b<c;b+=1)if(this.positions[b].element===a)return this.positions[b];return-1},ScrollPositional.prototype.findPositionById=function(a){if(void 0!==a&&"string"==typeof a&&a.length>0)for(var b=0,c=this.positions.length;b<c;b+=1)if(this.positions[b].id===a)return this.positions[b];return-1},ScrollPositional.prototype.findPositionByIndex=function(a){return a=Number(a),!isNaN(a)&&a>-1&&parseInt(a)===a&&a<this.positions.length&&this.positions[a]instanceof ScrollPosition?this.positions[a]:-1},ScrollPositional.prototype.findPositional=function(a){if(a instanceof ScrollPosition){for(var b=!1,c=0,d=this.positions.length;c<d;c+=1)if(a===this.positions[c]){a=this.positions[c],b=!0;break}if(!b)return-1}else{var e=a;if(a=void 0!==e&&isHTMLElement(e)?this.findPositionByElement(e):-1,a=a===-1?this.findPositionByIndex(e):a,a=a===-1?this.findPositionById(e):a,a===-1)return-1}return a instanceof ScrollPosition?a:-1},ScrollPositional.prototype.whichIndex=function(){for(var a,b=((new ScreenProperties).offsetY(),-1),c=0,d=this.positions.length;c<d;c+=1)if(a=this.positions[c],void 0!==a.element&&isHTMLElement(a.element)&&inVisibleDOM(a.element)){var e=new BoundaryCoordinates(a.element);if(e.isOver((new ScreenProperties).offsetX(),(new ScreenProperties).offsetY()))return c}return b},ScrollPositional.prototype.whichPosition=function(){var a=this.whichIndex();return a!==-1?this.positions[a]:-1},ScrollPositional.prototype.whichId=function(){var a=this.whichIndex();return a!==-1&&""!==this.positions[a].id?this.positions[a].id:""},ScrollPositional.prototype.whichElement=function(){var a=this.whichIndex();return a!==-1?this.positions[a].element:null},ScrollPositional.prototype.goto=function(a){if(this.enabled&&this.isFunctional()){a=this.findPositional(a);var b=this.whichPosition();if(a!==b&&a!==-1){var c=new Coordinates(a.coordinates.getX1(),a.coordinates.getY1());return this.master.animateTo(c,this.axis)}}return!1};