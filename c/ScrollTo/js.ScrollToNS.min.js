"use strict";var adr=__imns("util.classes");"ScrollTo"in adr||(adr.ScrollTo=function(){var a=__imns("util.classes"),b=__imns("util.tools"),c=this;return void 0!==a.ScrollTo.prototype.singleton?a.ScrollTo.prototype.singleton:(this.animInitiated=!1,this.animScrollX={},this.animScrollY={},this.nonePushInitiated=!1,this.lastScroll=new c.Coordinates,this.defaults={block:"center",inline:"nearest",behavior:"instant"},this.canBehave=!0,b.fetter(document,"DOMContentLoaded",function(){c.getDefaults()},!0),this)},adr.ScrollTo.prototype.getDefaults=function(){var a=__imns("util.classes"),b=__imns("util.tools"),c=new a.SupportedCSSProperty("scroll-behavior");this.defaults.behavior=c.exists?b.findElementStyleDeep(document.body,c.cssProperty):"instant"},adr.ScrollTo.elementWatcher=function(a){},adr.ScrollTo.elementWatch=function(a){},adr.ScrollTo.prepareAnchor=function(a){var b=__imns("util.validation");return b.isString(a)&&a.length>0?(a="#"===a.charAt(0)?a.substring(1):a,a=encodeURI(a)):a="",a},adr.ScrollTo.currentLocationHash=function(){var a="";return"location"in window&&"hash"in window.location?(a=window.location.hash,a="#"===a.charAt(0)?a.substring(1):a):"href"in window.location&&(a=window.location.href),decodeURI(a)},adr.ScrollTo.initNonePushState=function(){this.nonePushInitiated=!0;var a=__imns("util.tools");a.fetter(window,"hashchange",function(){var a=__imns("util.tools"),b=__imns("util.classes"),c=new b.ScrollTo;return!c.progChange||(c.progChange=!1,a.preventDefault(),!1)},!0)},adr.ScrollTo.silentlyUpDateHash=function(a){if(a=this.prepareAnchor(a),decodeURI(a)===this.currentLocationHash())return!0;if("history"in window&&"replaceState"in window.history){var b={};window.history.replaceState(b,"silent","#"+a)}else this.nonePushInitiated||this.initNonePushState(),this.progChange=!0,window.location.href="#"+a},adr.ScrollTo.prototype.scroll=function(a,b){var c=(__imns("util.dom"),__imns("util.classes")),d=__imns("util.validation");if(a instanceof c.Coordinates)this.scrollToCoordinates(a);else if(d.isNumber(a)&&d.isNumber(b)){var e=new c.Coordinates(a,b);this.scrollToCoordinates(e)}return"object"==typeof a&&(d.isHTMLElement(a)?this.scrollToElement({element:a}):this.scrollToOptions(a)),!1},adr.ScrollTo.prototype.validateBehavior=function(a){var b=__imns("util.validation");if(b.isString(a)){a=a.toLowerCase();var c=/^auto|smooth|instant$/;return c.test()?a:void 0}},adr.ScrollTo.prototype.validateBlock=function(a){var b=__imns("util.validation"),c=/^start|center|end|nearest$/;return b.isString(a)?(a=a.toLowerCase(),c.test(a)?a:"center"):"center"},adr.ScrollTo.prototype.validateInline=function(a){var b=__imns("util.validation"),c=/^start|center|end|nearest$/;return b.isString(a)?(a=a.toLowerCase(),c.test(a)?a:"nearest"):"nearest"},adr.ScrollTo.prototype.calculateCoordinates=function(a,b,c){var d=__imns("util.validation"),e=__imns("util.classes"),f={element:d.isHTMLElement(a)?a:void 0,block:this.validateBlock(b),inline:this.validateInline(c)};if(void 0!==f.element){var g=(new e.BoundaryCoordinates({element:f.element}),new e.ScreenProperties);g.getDocumentBounds()}},adr.ScrollTo.prototype.isSmoothScrollSupported=function(){var a=__imns("util.classes");return!!new a.SupportedCSSProperty("scroll-behvaiour").exists},adr.ScrollTo.prototype.initAnimationProperty=function(){if(!this.isSmoothScrollSupported()){var a=__imns("util.classes");this.animScrollX=new a.AnimationProperty({name:"imnsScrollX",get:function(){var a=__imns("util.classes"),b=__imns("util.validation"),c=(new a.ScreenProperties).getDocumentBounds(),d=Math.round(parseFloat(c.left));return b.isNumber(d)?d:0},set:function(a,b,c){var d=__imns("util.classes"),e=new d.ScrollTo,f=(new d.ScreenProperties).getDocumentBounds(),g=e.lastScroll.x,h=5,i=g-h<f.left&&g+h>f.left;return i?(b=Math.round(b),"scrollTo"in window?window.scrollTo(b,f.top):window.scroll(b.scr.top),e.lastScroll.x=b,!0):(e.animateX.pause(),e.animateX.clear(),!1)},start:function(){},end:function(){}}),this.animScrollY=new a.AnimationProperty({name:"imnsScrollY",get:function(){var a=__imns("util.classes"),b=__imns("util.validation"),c=(new a.ScreenProperties).getDocumentBounds(),d=Math.round(parseFloat(c.top));return b.isNumber(d)?d:0},set:function(a,b,c){var d=__imns("util.classes"),e=new d.ScrollTo,f=(new d.ScreenProperties).getDocumentBounds(),g=e.lastScroll.y,h=5,i=g-h<f.top&&g+h>f.top;return i?(b=Math.round(b),"scrollTo"in window?window.scrollTo(f.left,b):window.scroll(f.left,b),e.lastScroll.y=b,!0):(e.animateY.pause(),e.animateY.clear(),!1)},start:function(){},end:function(){}}),this.animInitiated=!0}},adr.ScrollTo.prototype.animatedScroll=function(a){var b=__imns("util.classes");this.animInitiated()?("pause"in this.animScrollX&&this.animScrollX.pause(),"pause"in this.animScrollY&&this.animScrollY.pause()):this.initAnimationProperty(),a.left!==this.screen.getDocumentBounds().scrollX&&(this.ScrollTo.animScrollX=new b.Animation({element:window,property:"imnsScrollX"})),a.top!==this.screen.getDocumentBounds().scrollY&&(adr.ScrollTo.animScrollY=new b.Animation({element:window,property:"imnsScrollY"}))},adr.ScrollTo.prototype.scroll=function(a){var b=(__imns("util.dom"),__imns("util.validation")),c={top:void 0,left:void 0,behavior:void 0};if("object"==typeof a)if("element"in a){if(b.isHTMLElement(a.element)){var d,e;"alignTop"in a&&(d="start",e="nearest"),"block"in a&&(d=this.validateBlock(a.block)?a.block:d),"inline"in a&&(e=this.validateInline(a.inline)?a.inline:e);var f=this.calculateCoordinates(a.element,a.block,a.inline);c.left=f.x,c.top=f.y}}else"top"in a&&(c.top=this.validateTop(a.top)),"left"in a&&(c.left=this.validateLeft(a.left));if(void 0!==c.top&&void 0!==c.left){var g=__imns("util.classes");if(void 0!==c.behavior&&g.ScrollTo.prototype.canBehave){if("smooth"===c.behavior&&!this.isSmoothScrollSupported())return this.animatedScroll(c),!0;if("scrollTo"in window){try{window.scrollTo({top:c.top,left:c.left,behavior:c.behavior})}catch(a){g.ScrollTo.prototype.canBehave=!1,window.scroll(c.left,c.top)}return!0}if("scroll"in window){try{window.scroll({top:c.top,left:c.left,behavior:c.behavior})}catch(a){g.ScrollTo.prototype.canBehave=!1,window.scroll(c.left,c.top)}return!0}}}return!1});